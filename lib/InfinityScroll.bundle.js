(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,s=Object.create(i.prototype),a=new S(r||[]);return s._invoke=function(t,e,n){var r=c;return function(i,s){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return T()}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=b(a,n);if(o){if(o===m)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var h=u(t,e,n);if("normal"===h.type){if(r=n.done?p:d,h.arg===m)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=p,n.method="throw",n.arg=h.arg)}}}(t,n,a),s}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function v(){}function g(){}function y(){}var x={};x[s]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(R([])));k&&k!==n&&r.call(k,s)&&(x=k);var L=y.prototype=v.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,s,a,o){var h=u(t[i],t,s);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,o)}),(function(t){n("throw",t,a,o)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,o)}))}o(h.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function b(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,b(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=L.constructor=y,y.constructor=g,g.displayName=h(y,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,h(t,o,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},E(I.prototype),I.prototype[a]=function(){return this},t.AsyncIterator=I,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new I(l(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(L),h(L,o,"Generator"),L[s]=function(){return this},L.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var h=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(h&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(h){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function i(n){return function(e){if(Array.isArray(e))return t(e)}(n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e,n,r,i,s,a){try{var o=t[s](a),h=o.value}catch(t){return void n(t)}o.done?e(h):Promise.resolve(h).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){a(s,r,i,o,h,"next",t)}function h(t){a(s,r,i,o,h,"throw",t)}o(void 0)}))}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(r,{InfinityScroll:()=>_});var d=n(757),f=n.n(d),p=function(){function t(e){h(this,t),c(this,"halfOfExistingSizeInDOM",void 0),c(this,"lastRenderIndex",void 0),c(this,"listLength",void 0),c(this,"chunkAmount",void 0),c(this,"tailingElementsAmount",void 0),this.halfOfExistingSizeInDOM=e.halfOfExistingSizeInDOM,this.lastRenderIndex=e.lastRenderIndex,this.listLength=e.listLength,this.chunkAmount=e.chunkAmount,this.tailingElementsAmount=e.tailingElementsAmount}return u(t,[{key:"isBeginOfListFromTop",value:function(t){return t<this.halfOfExistingSizeInDOM}},{key:"isEndOfListFromTop",value:function(t){return t>this.lastRenderIndex}},{key:"isBeginOfListFromBottom",value:function(t){return t>=this.listLength-3*this.chunkAmount}},{key:"isEndOfListFromBottom",value:function(t){return 0===t||t<this.tailingElementsAmount}},{key:"isAllowRenderNearBorder",value:function(t,e){return("down"!==t||!this.isBeginOfListFromTop(e))&&(("down"!==t||!this.isEndOfListFromTop(e))&&(("up"!==t||!this.isBeginOfListFromBottom(e))&&("up"!==t||!this.isEndOfListFromBottom(e))))}}]),t}(),m=function(){function t(){h(this,t),c(this,"direction","down"),c(this,"isGoingFromBottom",!1),c(this,"prevScroll",0)}return u(t,[{key:"setScrollDirection",value:function(t){t>this.prevScroll?this.direction="down":this.direction="up",this.prevScroll=t}},{key:"setGoingFromBottom",value:function(t,e,n){"down"===this.direction&&n<=t?this.isGoingFromBottom=!1:"up"===this.direction&&n>=e-1&&(this.isGoingFromBottom=!0)}},{key:"isBigDiff",value:function(t,e,n){var r=this.isGoingFromBottom&&t>e+n||!this.isGoingFromBottom&&t>e;return r}}]),t}(),v=function(){function t(){h(this,t),c(this,"amount",2),c(this,"htmlHeight",0),c(this,"firstOrderNumber",0),c(this,"lastOrderNumber",1),c(this,"lastRenderIndex",0),c(this,"startRenderIndex",0)}return u(t,[{key:"getOrderNumber",value:function(t){return Math.floor(t/this.htmlHeight)}},{key:"getRenderIndexDiff",value:function(t){return Math.abs(this.startRenderIndex-t)}},{key:"calcRenderIndex",value:function(t){return t*this.amount}}]),t}(),g=function t(){h(this,t),c(this,"data",void 0),c(this,"length",0),c(this,"existingSizeInDOM",0),c(this,"halfOfExistingSizeInDOM",0),c(this,"wrapperHeight",0),c(this,"itemHeight",0),c(this,"tailingElementsAmount",0),c(this,"startIndexOfLastPart",0),this.data=[]};function y(t){return Object.keys(t).some((function(e){return!t[e]&&0!==t[e]}))}function x(t){return fetch(t).then((function(t){return t.json().then((function(t){return t})).catch((function(t){}))}))}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n-e,i=t({start:e,end:n,limit:r});return x(i)}function k(t,e){return L.apply(this,arguments)}function L(){return(L=o(f().mark((function t(e,n){var r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,1,2);case 2:if(r=t.sent,2!==(null==(i=Array.isArray(r)?r:n&&r[n])?void 0:i.length)){t.next=6;break}return t.abrupt("return",!0);case 6:if(1!==(null==i?void 0:i.length)){t.next=8;break}return t.abrupt("return",!1);case 8:throw new Error("Can't define include end of range");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e,n){return I.apply(this,arguments)}function I(){return(I=o(f().mark((function t(e,n,r){var i,s,a,o,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Number(!n),t.next=3,w(e,0,i);case 3:return s=t.sent,t.next=6,w(e,1,1+i);case 6:if(a=t.sent,o=Array.isArray(s)?s:r&&s[r],h=Array.isArray(a)?a:r&&a[r],1!==(null==o?void 0:o.length)){t.next=11;break}return t.abrupt("return",0);case 11:if(1!==(null==h?void 0:h.length)){t.next=13;break}return t.abrupt("return",1);case 13:throw new Error("Can't define base index");case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t){try{var e=new URL(t);return"http:"===e.protocol||"https:"===e.protocol}catch(t){return!1}}function O(t){return["string"==typeof t&&b(t),"function"==typeof t&&b(t({start:1,end:2}))]}function A(t,e){return S.apply(this,arguments)}function S(){return(S=o(f().mark((function t(e,n){var r,i,s,a,o,h,l,u,c,d,p,m,v,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=4,i=!1,s=1,a=0;case 4:if(i){t.next=14;break}return h=s,l=s+r,t.next=9,w(e,h,l);case 9:u=t.sent,(c=Array.isArray(u)?u:n&&u[n])&&c.length>0?(a=s,s*=10):i=!0,t.next=4;break;case 14:o=s,d=!1,p=0;case 17:if(!(p<100)||d){t.next=30;break}return m=Math.ceil((a+o)/2),t.next=23,w(e,m,m+r);case 23:v=t.sent,(g=Array.isArray(v)?v:n&&v[n])&&g.length>0?a=m:o=m,p++,a+1===o&&(d=!0),t.next=17;break;case 30:return t.abrupt("return",a);case 31:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=function(){function t(e){h(this,t),c(this,"isStopRender",!1),c(this,"delay",0),c(this,"fillListTimerId",void 0),c(this,"targetElem",void 0),c(this,"template",void 0),c(this,"GLOBAL_ITEM_COUNTER",0),c(this,"skeleton",void 0),this.skeleton=e.skeleton,this.targetElem=e.targetElem,this.template=e.template}return u(t,[{key:"setPaddingToList",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length*t.itemHeight-4*e-n;r<0&&(r=0),this.targetElem.style.paddingBottom="".concat(r,"px")}},{key:"calcStartOffsetIndex",value:function(t,e,n,r){var i=t-e;return i<0&&(i=0),"down"===n&&i>r&&(i=r),i}},{key:"setOffsetToList",value:function(t,e,n,r){var i=this.calcStartOffsetIndex(t.startRenderIndex,t.amount,r,n.startIndexOfLastPart)*n.itemHeight;this.targetElem.style.transform="translate(0,".concat(i,"px)"),this.setPaddingToList(n,t.htmlHeight,i)}},{key:"createItem",value:function(t,e){return this.skeleton.createElement({data:t,dataIndex:e+1})}},{key:"removeItem",value:function(t){var e=this.targetElem[t];e&&this.targetElem.removeChild(e)}},{key:"fillList",value:function(t){var e=this;if(!(this.GLOBAL_ITEM_COUNTER>49999||this.GLOBAL_ITEM_COUNTER>=t.length||this.GLOBAL_ITEM_COUNTER>=t.existingSizeInDOM)){for(var n=document.createDocumentFragment(),r=0;r<1e3&&r<t.length-1&&this.GLOBAL_ITEM_COUNTER<t.length&&this.GLOBAL_ITEM_COUNTER<t.existingSizeInDOM;r++){if(void 0===t.data)throw new Error("Your list.data is undefined");var i=t.data[this.GLOBAL_ITEM_COUNTER];n.append(this.createItem(i,this.GLOBAL_ITEM_COUNTER)),this.GLOBAL_ITEM_COUNTER++}this.targetElem.append(n),this.fillListTimerId=window.setTimeout((function(){return e.fillList(t)}),this.delay)}}},{key:"calcSequenceByDirection",value:function(t,e,n,r){var i="down"===t?n+e:n-r;return i<0&&(i=0),i}},{key:"resetAllList",value:function(t,e,n,r,i){for(var s=document.createDocumentFragment(),a=0;a<1e3&&a<r.existingSizeInDOM;a++){var o=a+n;if(void 0===r.data)throw new Error("Your list.data is undefined");var h=r.data[o];s.append(this.createItem(h,o))}this.targetElem.innerHTML="",this.targetElem.append(s),this.setOffsetToList(t,e,r,i)}},{key:"checkAllowToChangeList",value:function(t,e,n,r,i,s){return!(n&&("up"===t&&0===e)&&r+e>=i)&&!("down"===t&&r+e>=s)}},{key:"prepareItems",value:function(t,e,n,r,i,s,a,o){for(var h=document.createDocumentFragment(),l=0;l<1e3&&l<t;l++){if(this.checkAllowToChangeList(e,n,r,l,i,s)){var u=l+n,c=a[u];h.append(this.createItem(c,u)),this.removeItem(o)}}return h}},{key:"putElementsToList",value:function(t,e){"down"===t?this.targetElem.append(e):this.targetElem.prepend(e)}},{key:"changeItemsInList",value:function(t,e,n,r){var i="down"===n?"firstChild":"lastChild",s=this.calcSequenceByDirection(n,e.halfOfExistingSizeInDOM,t.startRenderIndex,t.amount);if(void 0===e.data)throw new Error("Your list.data is undefined");var a=this.prepareItems(t.amount,n,s,r,e.tailingElementsAmount,e.length,e.data,i);this.putElementsToList(n,a)}},{key:"modifyCurrentDOM",value:function(t,e,n,r){this.changeItemsInList(t,e,n,r),this.setOffsetToList(t,t.startRenderIndex,e,n)}}]),t}(),T=function(){function t(e){h(this,t),c(this,"template",void 0),c(this,"listLength",void 0),this.template=e.template}return u(t,[{key:"setListHeight",value:function(t){this.listLength=t}},{key:"setRequiredAttrs",value:function(t){var e=t.element,n=t.dataIndex;e.setAttribute("aria-setsize",this.listLength.toString()),e.setAttribute("aria-posinset",n.toString())}},{key:"updateElement",value:function(t,e,n){var r=document.createElement("div"),i=this.template(e,this.listLength,n);r.innerHTML=i;var s=r.firstElementChild;this.setRequiredAttrs({element:s,dataIndex:n}),t.replaceWith(s)}},{key:"createElement",value:function(t){var e=t.data,n=t.dataIndex,r=document.createElement("div"),i=this.template(e,this.listLength,n);r.innerHTML=i;var s=r.firstElementChild;return this.setRequiredAttrs({element:s,dataIndex:n}),s}}]),t}();function M(t,e,n,r){var i="down"===t?n+e:n-r;return i<0&&(i=0),i}var D={list:"UL",table:"TABLE"},_=function(){function t(e){var n=this;h(this,t),c(this,"timerIdRefreshList",void 0),c(this,"name",void 0),c(this,"selectorId",void 0),c(this,"wrapperEl",void 0),c(this,"subDir",void 0),c(this,"forcedListLength",void 0),c(this,"listType",void 0),c(this,"listWrapperHeight",void 0),c(this,"dataLoadPlace",void 0),c(this,"dataLoadSpeed",void 0),c(this,"dataUrl",void 0),c(this,"includeEnd",void 0),c(this,"basedIndex",void 0),c(this,"listEl",void 0),c(this,"domMngr",void 0),c(this,"scroll",void 0),c(this,"chunk",void 0),c(this,"list",void 0),c(this,"render",void 0),c(this,"skeleton",void 0),c(this,"sleep",(function(t){return new Promise((function(e){return setTimeout(e,t)}))})),this.name=e.name,this.selectorId=e.selectorId;var r=document.getElementById(e.selectorId);if(null===r)throw new Error("Element ".concat(e.selectorId," does not exist in DOM"));this.wrapperEl=r,this.subDir=e.subDir,this.forcedListLength=e.forcedListLength,this.listType=e.listType||"list",this.listWrapperHeight=e.listWrapperHeight,this.listEl=this.createInnerList(),this.scroll=new m,this.chunk=new v,this.list=new g,this.skeleton=new T({template:e.templateString});var i={skeleton:this.skeleton,targetElem:this.listEl,template:e.templateString};this.domMngr=new R(i),this.dataLoadPlace=Array.isArray(e.data)?"local":"remote",this.dataLoadSpeed="instant",this.includeEnd=!1,this.basedIndex=1,e.data,"remote"===this.dataLoadPlace&&(this.dataUrl=e.data),this.setListData(e.data).then((function(){n.start()}))}var e,n,r,a,l;return u(t,[{key:"start",value:(l=o(f().mark((function t(){var e,n,r=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setDefaultStyles(),this.getAllSizes(),"lazy"!==this.dataLoadSpeed){t.next=7;break}return e=this.basedIndex+1,t.next=7,this.getListDataLazy(e,this.list.existingSizeInDOM).then((function(t){var e;r.list.data=null===(e=r.list.data)||void 0===e?void 0:e.concat(t)}));case 7:if(!y(n={halfOfExistingSizeInDOM:this.list.halfOfExistingSizeInDOM,lastRenderIndex:this.chunk.lastRenderIndex,listLength:this.list.length,chunkAmount:this.chunk.amount,tailingElementsAmount:this.list.tailingElementsAmount})){t.next=10;break}throw new Error("Some of props for RenderController is undefined");case 10:this.render=new p(n),this.domMngr.fillList(this.list),this.domMngr.setPaddingToList(this.list,this.chunk.htmlHeight),this.wrapperEl.addEventListener("scroll",this.calcCurrentDOMRender.bind(this));case 14:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"setDefaultStyles",value:function(){this.wrapperEl.style.height=this.listWrapperHeight,this.wrapperEl.style.overflowY="scroll"}},{key:"createInnerList",value:function(){var t=document.createElement(D[this.listType]),e="".concat(this.selectorId,"_").concat(this.listType.charAt(0).toUpperCase()).concat(this.listType.slice(1));return t.setAttribute("class",e),this.wrapperEl.appendChild(t)}},{key:"getAllSizes",value:function(){var t;if(void 0===this.domMngr)throw new Error("Your DomManager is undefined");var e=this.wrapperEl,n=this.listEl,r=window.getComputedStyle(e),i=n.firstChild;if(this.list.wrapperHeight=parseInt(r.getPropertyValue("height"),10)||1,this.list.wrapperHeight<2)console.error("You must set height to your list-wrapper more than 10px!");else{if(!i){if(!this.list.data)throw new Error("You does not have list.data");var s=this.list.data[0];this.domMngr.targetElem.append(this.domMngr.createItem(s,0)),i=n.firstChild}this.list.itemHeight=(null===(t=i)||void 0===t?void 0:t.offsetHeight)||this.list.wrapperHeight,this.chunk.amount=Math.ceil(this.list.wrapperHeight/this.list.itemHeight),this.list.existingSizeInDOM=4*this.chunk.amount,this.list.halfOfExistingSizeInDOM=this.list.existingSizeInDOM/2,this.chunk.lastRenderIndex=this.list.length-this.list.halfOfExistingSizeInDOM,this.list.startIndexOfLastPart=this.list.length-this.list.existingSizeInDOM,this.chunk.lastOrderNumber=Math.floor(this.list.length/this.chunk.amount),this.chunk.htmlHeight=this.chunk.amount*this.list.itemHeight,this.list.tailingElementsAmount=this.list.length%this.chunk.amount;var a=".".concat(this.selectorId,"_List {\n      overflow: hidden; \n      }\n      \n.").concat(this.selectorId,"_List li { \n      white-space: nowrap;\n    }"),o=document.createElement("style");o.appendChild(document.createTextNode(a)),this.wrapperEl.prepend(o),i&&this.domMngr.removeItem("firstChild")}}},{key:"calcCurrentDOMRender",value:(a=o(f().mark((function t(e){var n,r,i,a,o,h,l,u,c,d,p,m,v,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target,r=n.scrollTop,i=this.chunk.getOrderNumber(r),a=this.chunk.calcRenderIndex(i),this.scroll.setScrollDirection(r),o=this.chunk.getRenderIndexDiff(a),this.scroll.setGoingFromBottom(this.chunk.firstOrderNumber,this.chunk.lastOrderNumber,i),h=a+(this.scroll.isGoingFromBottom?this.list.tailingElementsAmount:0),(l=this.checkBigDiff(o))&&(clearTimeout(this.timerIdRefreshList),this.setTimerToRefreshList()),this.chunk.startRenderIndex===h){t.next=18;break}if(this.chunk.startRenderIndex=h,"====== this.chunk.startRenderIndex поменялся ".concat(this.chunk.startRenderIndex," ======"),this.render){t.next=16;break}throw new Error("this.render is not exist");case 16:this.render.isAllowRenderNearBorder(this.scroll.direction,this.chunk.startRenderIndex)&&this.domMngr&&(u={startRenderIndex:this.chunk.startRenderIndex,amount:this.chunk.amount,htmlHeight:this.chunk.htmlHeight},"lazy"!==this.dataLoadSpeed||l||(c=this.getSequence(this.chunk.startRenderIndex),d=s(c,2),p=d[0],m=d[1],(v=this.checkItemForLoad(p,m)).length&&this.fetchUnfoundedRanges(v)),g={existingSizeInDOM:this.list.existingSizeInDOM,halfOfExistingSizeInDOM:this.list.halfOfExistingSizeInDOM,tailingElementsAmount:this.list.tailingElementsAmount,length:this.list.length,data:this.list.data,startIndexOfLastPart:this.list.startIndexOfLastPart,itemHeight:this.list.itemHeight},this.domMngr.modifyCurrentDOM(u,g,this.scroll.direction,this.scroll.isGoingFromBottom));case 18:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"checkBigDiff",value:function(t){return this.scroll.isBigDiff(t,this.chunk.amount,this.list.tailingElementsAmount)}},{key:"setTimerToRefreshList",value:function(){var t=this,e=window.setTimeout(o(f().mark((function n(){var r,i,a,o,h,l;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.render){n.next=11;break}if(r=t.chunk.startRenderIndex,i=t.getSequence(t.chunk.startRenderIndex,!0),a=s(i,2),o=a[0],h=a[1],"lazy"===t.dataLoadSpeed&&(l=[o,h],t.fetchUnfoundedRanges([l])),e===t.timerIdRefreshList){n.next=6;break}return n.abrupt("return");case 6:t.chunk.startRenderIndex=r,"====== this.chunk.startRenderIndex форсированно поменялся ".concat(t.chunk.startRenderIndex," ======"),t.domMngr.resetAllList(t.chunk,r,o,t.list,t.scroll.direction);case 11:case"end":return n.stop()}}),n)}))),30);this.timerIdRefreshList=e}},{key:"checkApiSettings",value:(r=o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(this.dataUrl,this.subDir);case 2:return this.includeEnd=t.sent,t.next=5,E(this.dataUrl,this.includeEnd,this.subDir);case 5:this.basedIndex=t.sent;case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setListData",value:(n=o(f().mark((function t(e){var n,r,i,a,o,h,l,u,c,d=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,"local"!==this.dataLoadPlace){t.next=6;break}this.list.data=e,n=e&&e.length,t.next=36;break;case 6:if(i=O(r=e),a=s(i,2),o=a[0],h=a[1],o||h){t.next=10;break}throw new Error("Your dataUrl is not a valid URL; or returned value is not a  valid URL");case 10:if(h){t.next=15;break}return t.next=13,x(r).then((function(t){var e=d.extractResponse(t);d.list.data=e,n=e&&e.length}));case 13:t.next=36;break;case 15:return this.dataLoadSpeed="lazy",t.next=18,this.checkApiSettings();case 18:return this.includeEnd,this.basedIndex,l=this.basedIndex,u=this.basedIndex+Number(!this.includeEnd),t.next=24,this.getListDataLazy(l,u);case 24:if(c=t.sent,this.list.data=c,!this.forcedListLength){t.next=31;break}n=this.forcedListLength,t.next=36;break;case 31:return t.next=33,A(r,this.subDir);case 33:t.t0=t.sent,t.t1=Number(!this.basedIndex),n=t.t0+t.t1;case 36:if(Array.isArray(this.list.data)){t.next=38;break}throw new Error("Your list does not have Array type");case 38:if(n){t.next=40;break}throw new Error("Your list does not have length or length is 0");case 40:this.list.length=n,this.skeleton.setListHeight(this.list.length);case 42:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getSequence",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r){var i=t-this.chunk.amount;n=(e=i>0?i:0)+this.list.existingSizeInDOM}else n=(e=M(this.scroll.direction,this.list.halfOfExistingSizeInDOM,t,this.chunk.amount))+this.chunk.amount;var s=this.list.length-this.list.existingSizeInDOM,a=this.list.length;return e>s&&(e=s,n=a),[e,n]}},{key:"fetchUnfoundedRanges",value:function(t){var e=this;t.forEach((function(t){var n=s(t,2),r=n[0],i=n[1],a=r+e.basedIndex,o=i+e.basedIndex-Number(e.includeEnd);w(e.dataUrl,a,o).then((function(t){var n=e.extractResponse(t);"Loaded from: ".concat(a,", to: ").concat(o),e.addNewItemsToDataList(r,n),e.updateSkeletonItems(r,n)}))}))}},{key:"addNewItemsToDataList",value:function(t,e){for(var n=e.length,r=0;r<n;r++){var i=t+r;this.list.data[i]=e[r]}}},{key:"updateSkeletonItems",value:function(t,e){for(var n=e.length,r=0;r<n;r++){var i=t+r+1,s='[aria-posinset="'.concat(i,'"]'),a=this.domMngr.targetElem.querySelector(s);a&&this.skeleton.updateElement(a,e[r],i)}}},{key:"checkItemForLoad",value:function(t,e){for(var n=[],r=!1,i=[],s=e-1,a=t;a<e;a++){var o=this.list.data[a];if(void 0===o&&!1===r)r=!0,i.push(a);else if(r&&(void 0!==o||a===s)){var h=a===s&&void 0===o?a+1:a;i.push(h),n.push(i.slice()),i.length=0,r=!1}}return n}},{key:"checkIndexOrdering",value:function(){var t,e=null===(t=this.domMngr)||void 0===t?void 0:t.targetElem;if(!e)throw new Error("You do not have HTML-element for your list");var n=null;i(e.children).forEach((function(t){var e=Number(t.getAttribute("aria-posinset"));null!==n?(n+1!==e&&console.error("Индексы поломались на элементе ".concat(e," (ожидали ").concat(n+1,")")),n=e):n=e}))}},{key:"getListDataLazy",value:(e=o(f().mark((function t(){var e,n,r,i=this,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:0,n=s.length>1&&void 0!==s[1]?s[1]:1,this.dataUrl){t.next=4;break}throw new Error("You try to call getListDataLazy, but you dont have dataUrl");case 4:if("string"!=typeof this.dataUrl){t.next=6;break}throw new Error("You try to call getListDataLazy, but your dataUrl is a string type");case 6:return t.next=8,w(this.dataUrl,e,n).then((function(t){return i.extractResponse(t)}));case 8:return r=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"extractResponse",value:function(t){var e=Array.isArray(t)?t:this.subDir&&t[this.subDir];if(!Array.isArray(e))throw new Error("Your fetched data does not have Array type");return e}}]),t}()})(),self.InfinityScroll=r.InfinityScroll})();