(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},708:(t,e,r)=>{"use strict";var i=r(645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,'[data-simplebar]{position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.simplebar-wrapper{overflow:hidden;width:inherit;height:inherit;max-width:inherit;max-height:inherit}.simplebar-mask{direction:inherit;position:absolute;overflow:hidden;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:auto !important;height:auto !important;z-index:0}.simplebar-offset{direction:inherit !important;-webkit-box-sizing:inherit !important;box-sizing:inherit !important;resize:none !important;position:absolute;top:0;left:0;bottom:0;right:0;padding:0;margin:0;-webkit-overflow-scrolling:touch}.simplebar-content-wrapper{direction:inherit;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;position:relative;display:block;height:100%;width:auto;max-width:100%;max-height:100%;overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.simplebar-content-wrapper::-webkit-scrollbar,.simplebar-hide-scrollbar::-webkit-scrollbar{display:none;width:0;height:0}.simplebar-content:after,.simplebar-content:before{content:" ";display:table}.simplebar-placeholder{max-height:100%;max-width:100%;width:100%;pointer-events:none}.simplebar-height-auto-observer-wrapper{-webkit-box-sizing:inherit !important;box-sizing:inherit !important;height:100%;width:100%;max-width:1px;position:relative;float:left;max-height:1px;overflow:hidden;z-index:-1;padding:0;margin:0;pointer-events:none;-webkit-box-flex:inherit;-ms-flex-positive:inherit;flex-grow:inherit;-ms-flex-negative:0;flex-shrink:0;-ms-flex-preferred-size:0;flex-basis:0}.simplebar-height-auto-observer{-webkit-box-sizing:inherit;box-sizing:inherit;display:block;opacity:0;position:absolute;top:0;left:0;height:1000%;width:1000%;min-height:1px;min-width:1px;overflow:hidden;pointer-events:none;z-index:-1}.simplebar-track{z-index:1;position:absolute;right:0;bottom:0;pointer-events:none;overflow:hidden}[data-simplebar].simplebar-dragging{pointer-events:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[data-simplebar].simplebar-dragging .simplebar-content{pointer-events:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[data-simplebar].simplebar-dragging .simplebar-track{pointer-events:all}.simplebar-scrollbar{position:absolute;left:0;right:0;min-height:10px}.simplebar-scrollbar:before{position:absolute;content:"";background:#000;border-radius:7px;left:2px;right:2px;opacity:0;-webkit-transition:opacity .2s .5s linear;transition:opacity .2s .5s linear}.simplebar-scrollbar.simplebar-visible:before{opacity:.5;-webkit-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:0s;transition-duration:0s}.simplebar-track.simplebar-vertical{top:0;width:11px}.simplebar-scrollbar:before{top:2px;bottom:2px;left:2px;right:2px}.simplebar-track.simplebar-horizontal{left:0;height:11px}.simplebar-track.simplebar-horizontal .simplebar-scrollbar{right:auto;left:0;top:0;bottom:0;min-height:0;min-width:10px;width:auto}[data-simplebar-direction=rtl] .simplebar-track.simplebar-vertical{right:auto;left:0}.simplebar-dummy-scrollbar-size{direction:rtl;position:fixed;opacity:0;visibility:hidden;height:500px;width:500px;overflow-y:hidden;overflow-x:scroll;-ms-overflow-style:scrollbar !important}.simplebar-dummy-scrollbar-size>div{width:200%;height:200%;margin:10px 0}.simplebar-hide-scrollbar{position:fixed;left:0;visibility:hidden;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}',""])},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(n[o]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);i&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,i=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var n=e&&e.prototype instanceof g?e:g,s=Object.create(n.prototype),o=new P(i||[]);return s._invoke=function(t,e,r){var i=u;return function(n,s){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===n)throw s;return D()}for(r.method=n,r.arg=s;;){var o=r.delegate;if(o){var a=S(o,r);if(a){if(a===m)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=h(t,e,r);if("normal"===l.type){if(i=r.done?p:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=p,r.method="throw",r.arg=l.arg)}}}(t,r,o),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function b(){}var x={};x[s]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(I([])));w&&w!==r&&i.call(w,s)&&(x=w);var k=b.prototype=g.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(n,s,o,a){var l=h(t[n],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,a)}))}a(l.arg)}var n;this._invoke=function(t,i){function s(){return new e((function(e,n){r(t,i,e,n)}))}return n=n?n.then(s,s):s()}}function S(t,r){var i=t.iterator[r.method];if(i===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=h(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,m;var s=n.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:D}}function D(){return{value:e,done:!0}}return v.prototype=k.constructor=b,b.constructor=v,v.displayName=l(b,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,a,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},E(L.prototype),L.prototype[o]=function(){return this},t.AsyncIterator=L,t.async=function(e,r,i,n,s){void 0===s&&(s=Promise);var o=new L(c(e,r,i,n),s);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(k),l(k,a,"Generator"),k[s]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return a.type="throw",a.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;O(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:I(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={id:i,exports:{}};return t[i](n,n.exports,r),n.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function e(e,r){if(e){if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,r):void 0}}function n(r){return function(e){if(Array.isArray(e))return t(e)}(r)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||e(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e,r,i,n,s,o){try{var a=t[s](o),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(i,n)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var s=t.apply(e,r);function a(t){o(s,i,n,a,l,"next",t)}function l(t){o(s,i,n,a,l,"throw",t)}a(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(i,{InfinityScroll:()=>re});var d=r(757),f=r.n(d),p=function(){function t(e){l(this,t),u(this,"lastRenderIndex",void 0),u(this,"lastPageLastRenderIndex",void 0),u(this,"listLength",void 0),u(this,"listlastPageLength",void 0),u(this,"chunkAmount",void 0),this.lastRenderIndex=e.lastRenderIndex,this.lastPageLastRenderIndex=e.lastPageLastRenderIndex,this.listLength=e.listLength,this.listlastPageLength=e.listlastPageLength,this.chunkAmount=e.chunkAmount}return h(t,[{key:"reInitValues",value:function(t,e){this.lastRenderIndex=t,this.listLength=e}},{key:"isBeginOfListFromTop",value:function(t){return t<=this.chunkAmount}},{key:"isEndOfListFromTop",value:function(t){return t>=this.lastRenderIndex}},{key:"isEndOfListLastPageFromTop",value:function(t){return t>=this.lastPageLastRenderIndex}},{key:"isBeginOfListFromBottom",value:function(t){return 0===t||t<0}},{key:"isEndOfListFromBottom",value:function(t){return t>=this.listLength-3*this.chunkAmount}},{key:"isEndOfListLastPageFromBottom",value:function(t){return t>=this.listlastPageLength-3*this.chunkAmount}},{key:"isAllowRenderNearBorder",value:function(t,e,r){return("down"!==t||!this.isBeginOfListFromTop(e))&&(("down"!==t||!this.isEndOfListFromTop(e))&&(("down"!==t||!r||!this.isEndOfListLastPageFromTop(e))&&("up"!==t||!(this.isBeginOfListFromBottom(e)||this.isEndOfListFromBottom(e)||r&&this.isEndOfListLastPageFromBottom(e)))))}}]),t}(),m=function(){function t(){l(this,t),u(this,"direction","down"),u(this,"isGoingFromBottom",!1),u(this,"maxScroll",0),u(this,"lastPageMaxScroll",0),u(this,"prevScroll",0)}return h(t,[{key:"setScrollDirection",value:function(t,e,r){t!==this.prevScroll&&(e||(t>this.prevScroll?this.direction="down":this.direction="up"),this.prevScroll=t)}},{key:"setGoingFromBottom",value:function(t,e,r,i,n){"down"===this.direction&&r<=1?this.isGoingFromBottom=!1:r>=e-1&&(this.isGoingFromBottom=!0),!this.isGoingFromBottom&&i>=n&&(this.isGoingFromBottom=!0)}},{key:"isBigDiff",value:function(t,e,r){var i=this.isGoingFromBottom&&t>e+r||!this.isGoingFromBottom&&t>e;return i}}]),t}(),g=function(){function t(){l(this,t),u(this,"amount",2),u(this,"htmlHeight",0),u(this,"firstOrderNumber",0),u(this,"lastOrderNumber",1),u(this,"lastPageLastOrderNumber",1),u(this,"lastRenderIndex",0),u(this,"lastPageLastRenderIndex",0),u(this,"startRenderIndex",0),u(this,"itemIndex",0),u(this,"prevPageRenderIndex",0)}return h(t,[{key:"getOrderNumber",value:function(t){return Math.floor(t/this.htmlHeight)}},{key:"getRenderIndexDiff",value:function(t){return Math.abs(this.itemIndex-t)}},{key:"calcRenderIndex",value:function(t){return t*this.amount}},{key:"setRenderIndex",value:function(t,e,r,i){i&&t>this.lastPageLastRenderIndex?this.startRenderIndex=this.lastPageLastRenderIndex:t>this.lastRenderIndex?this.startRenderIndex=this.lastRenderIndex:this.startRenderIndex=t,this.itemIndex=r*(e-1)+this.startRenderIndex}}]),t}(),v=function(){function t(){l(this,t),u(this,"data",void 0),u(this,"fullLength",0),u(this,"length",0),u(this,"lastPageLength",0),u(this,"existingSizeInDOM",0),u(this,"halfOfExistingSizeInDOM",0),u(this,"wrapperHeight",0),u(this,"itemHeight",0),u(this,"tailingElementsAmount",0),u(this,"pageTailingElementsAmount",0),u(this,"lastPageTailingElementsAmount",0),u(this,"startIndexOfLastPart",0),u(this,"lastPageStartIndexOfLastPart",0),this.data=[]}return h(t,[{key:"getTotalListHeight",value:function(){return this.itemHeight*this.fullLength}},{key:"setExistingSizeInDOM",value:function(t){this.existingSizeInDOM=Math.min(this.length,4*t)}}]),t}();function b(t){return Object.keys(t).some((function(e){return!t[e]&&0!==t[e]}))}function x(t){return fetch(t).then((function(t){return t.json().then((function(t){return t})).catch((function(t){}))}))}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r-e,n=t({start:e,end:r,limit:i});return x(n)}function w(t,e){return k.apply(this,arguments)}function k(){return(k=a(f().mark((function t(e,r){var i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,1,2);case 2:if(i=t.sent,2!==(null==(n=Array.isArray(i)?i:r&&i[r])?void 0:n.length)){t.next=6;break}return t.abrupt("return",!0);case 6:if(1!==(null==n?void 0:n.length)){t.next=8;break}return t.abrupt("return",!1);case 8:throw new Error("Can't define include end of range");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e,r){return L.apply(this,arguments)}function L(){return(L=a(f().mark((function t(e,r,i){var n,s,o,a,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(!r),t.next=3,y(e,0,n);case 3:return s=t.sent,t.next=6,y(e,1,1+n);case 6:if(o=t.sent,a=Array.isArray(s)?s:i&&s[i],l=Array.isArray(o)?o:i&&o[i],1!==(null==a?void 0:a.length)){t.next=11;break}return t.abrupt("return",0);case 11:if(1!==(null==l?void 0:l.length)){t.next=13;break}return t.abrupt("return",1);case 13:throw new Error("Can't define base index");case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){try{var e=new URL(t);return"http:"===e.protocol||"https:"===e.protocol}catch(t){return!1}}function T(t){return["string"==typeof t&&S(t),"function"==typeof t&&S(t({start:1,end:2}))]}function O(t,e){return P.apply(this,arguments)}function P(){return(P=a(f().mark((function t(e,r){var i,n,s,o,a,l,c,h,u,d,p,m,g,v;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=4,n=!1,s=1,o=0;case 4:if(n){t.next=14;break}return l=s,c=s+i,t.next=9,y(e,l,c);case 9:h=t.sent,(u=Array.isArray(h)?h:r&&h[r])&&u.length>0?(o=s,s*=10):n=!0,t.next=4;break;case 14:a=s,d=!1,p=0;case 17:if(!(p<100)||d){t.next=30;break}return m=Math.ceil((o+a)/2),t.next=23,y(e,m,m+i);case 23:g=t.sent,(v=Array.isArray(g)?g:r&&g[r])&&v.length>0?o=m:a=m,p++,o+1===a&&(d=!0),t.next=17;break;case 30:return t.abrupt("return",o);case 31:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){setTimeout((function(){return e()}),t)}))},D=function(){function t(e){l(this,t),u(this,"targetElem",void 0),u(this,"GLOBAL_ITEM_COUNTER",0),u(this,"skeleton",void 0),u(this,"offsetElem",void 0),this.skeleton=e.skeleton,this.targetElem=e.targetElem,this.offsetElem=null}return h(t,[{key:"setHeightToList",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.length;e&&1!==e.currentPage&&e.currentPage===e.totalPages&&(i=t.lastPageLength);var n=i*t.itemHeight-r;this.targetElem.style.height="".concat(n,"px")}},{key:"calcStartOffsetIndex",value:function(t,e,r,i,n){var s=t-e;return s<0&&(s=0),n.currentPage===n.totalPages&&s>i.lastPageStartIndexOfLastPart?s=i.lastPageStartIndexOfLastPart:s>i.startIndexOfLastPart&&(s=i.startIndexOfLastPart),s}},{key:"setOffsetToList",value:function(t,e,r,i,n){var s=this.calcStartOffsetIndex(e,t.amount,i,r,n)*r.itemHeight;this.offsetElem.style.height="".concat(s,"px"),this.setHeightToList(r,n,s)}},{key:"createItem",value:function(t,e){return this.skeleton.createElement({data:t,dataIndex:e+1})}},{key:"removeItem",value:function(t){var e=this.targetElem[t];e&&this.targetElem.removeChild(e)}},{key:"fillList",value:function(t){if(!(this.GLOBAL_ITEM_COUNTER>49999||this.GLOBAL_ITEM_COUNTER>=t.length||this.GLOBAL_ITEM_COUNTER>=t.existingSizeInDOM)){for(var e=document.createDocumentFragment(),r=0;r<1e3&&r<t.length&&this.GLOBAL_ITEM_COUNTER<t.length&&this.GLOBAL_ITEM_COUNTER<t.existingSizeInDOM;r++){if(void 0===t.data)throw new Error("Your list.data is undefined");var i=t.data[this.GLOBAL_ITEM_COUNTER];e.append(this.createItem(i,this.GLOBAL_ITEM_COUNTER)),this.GLOBAL_ITEM_COUNTER++}this.targetElem.append(e)}}},{key:"calcSequenceByDirection",value:function(t,e,r,i){var n="down"===t?r+e:r-i;return n<0&&(n=0),n}},{key:"resetAllList",value:function(t,e,r,i,n,s){var o=document.createDocumentFragment(),a=i.existingSizeInDOM;1!==s.currentPage&&s.currentPage===s.totalPages&&i.lastPageLength<i.existingSizeInDOM&&(a=i.lastPageLength);for(var l=0;l<1e3&&l<a;l++){var c=l+r;if(void 0===i.data)throw new Error("Your list.data is undefined");var h=i.data[c];o.append(this.createItem(h,c))}this.targetElem.innerHTML="",this.targetElem.append(o),this.setOffsetToList(t,e,i,n,s)}},{key:"checkAllowToChangeList",value:function(t,e,r,i,n,s){var o="up"===t&&0===e,a=s.isLastPage?n.lastPageTailingElementsAmount:n.pageTailingElementsAmount,l=r&&o&&0!==a&&i+e>=a,c=!1;return"down"===t&&i+e>=n.length&&(c=!0),"down"===t&&1!==s.currentPage&&s.currentPage===s.totalPages&&i+e>=n.lastPageLength&&(c=!0),!l&&!c}},{key:"prepareItems",value:function(t,e,r,i,n,s,o,a){for(var l=document.createDocumentFragment(),c=0;c<1e3&&c<t;c++){if(this.checkAllowToChangeList(e,r,i,c,n,s)){var h=c+a,u=n.data[h];l.append(this.createItem(u,h)),this.removeItem(o)}}return l}},{key:"putElementsToList",value:function(t,e){"down"===t?this.targetElem.append(e):this.targetElem.prepend(e)}},{key:"changeItemsInList",value:function(t,e,r,i,n){var s="down"===r?"firstChild":"lastChild",o=this.calcSequenceByDirection(r,e.halfOfExistingSizeInDOM,t.startRenderIndex,t.amount),a=(n.currentPage-1)*e.length+o;if(void 0===e.data)throw new Error("Your list.data is undefined");var l=this.prepareItems(t.amount,r,o,i,e,n,s,a);this.putElementsToList(r,l)}},{key:"modifyCurrentDOM",value:function(t,e,r,i,n){this.changeItemsInList(t,e,r,i,n),this.setOffsetToList(t,t.startRenderIndex,e,r,n)}}]),t}();function A(t){var e=document.createElement("table");return e.innerHTML="<tbody>".concat(t,"</tbody>"),e.firstElementChild.firstElementChild}function N(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function R(t){t.classList.add("loading"),t.innerHTML=t.innerHTML.replaceAll("undefined","Loading")}function M(t){t.classList.add("loading"),t.innerHTML='<td colspan="2">Loading<span class="dots">...</span></td>'}function z(t){var e=t.tagName,r=t.className,i=t.text,n=document.createElement(e);return Array.isArray(r)?r.forEach((function(t){n.classList.add(t)})):r&&n.classList.add(r),i&&(n.textContent=i),n}function H(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:700;t.classList.add(e),setTimeout((function(){t.classList.remove(e)}),r)}var C=function(){function t(e){l(this,t),u(this,"template",void 0),u(this,"templateCb",void 0),u(this,"listLength",0),u(this,"makeItemFromString",void 0),u(this,"setLoadingPlaceholder",void 0),this.template=e.template,this.templateCb=e.templateCb,this.makeItemFromString="table"!==e.listType?N:A,this.setLoadingPlaceholder="table"!==e.listType?R:M}return h(t,[{key:"setListLength",value:function(t){this.listLength=t}},{key:"setRequiredAttrs",value:function(t){var e=t.element,r=t.dataIndex;e.setAttribute("aria-setsize",this.listLength.toString()),e.setAttribute("aria-posinset",r.toString())}},{key:"updateElement",value:function(t,e,r){var i=this.template({item:e,listLength:this.listLength,idx:r,templateCb:this.templateCb}),n=this.makeItemFromString(i);this.setRequiredAttrs({element:n,dataIndex:r}),t.replaceWith(n)}},{key:"createElement",value:function(t){var e=t.data,r=t.dataIndex,i=this.template({item:e||{},listLength:this.listLength,idx:r,templateCb:this.templateCb}),n=this.makeItemFromString(i);return e||this.setLoadingPlaceholder(n),this.setRequiredAttrs({element:n,dataIndex:r}),n}}]),t}();const W=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const B="object"==typeof global&&global&&global.Object===Object&&global;var F="object"==typeof self&&self&&self.Object===Object&&self;const U=B||F||Function("return this")();const j=function(){return U.Date.now()};var _=/\s/;const V=function(t){for(var e=t.length;e--&&_.test(t.charAt(e)););return e};var Y=/^\s+/;const q=function(t){return t?t.slice(0,V(t)+1).replace(Y,""):t};const G=U.Symbol;var X=Object.prototype,Q=X.hasOwnProperty,$=X.toString,J=G?G.toStringTag:void 0;const K=function(t){var e=Q.call(t,J),r=t[J];try{t[J]=void 0;var i=!0}catch(t){}var n=$.call(t);return i&&(e?t[J]=r:delete t[J]),n};var Z=Object.prototype.toString;const tt=function(t){return Z.call(t)};var et=G?G.toStringTag:void 0;const rt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":et&&et in Object(t)?K(t):tt(t)};const it=function(t){return null!=t&&"object"==typeof t};const nt=function(t){return"symbol"==typeof t||it(t)&&"[object Symbol]"==rt(t)};var st=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^0o[0-7]+$/i,lt=parseInt;const ct=function(t){if("number"==typeof t)return t;if(nt(t))return NaN;if(W(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=W(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=q(t);var r=ot.test(t);return r||at.test(t)?lt(t.slice(2),r?2:8):st.test(t)?NaN:+t};var ht=Math.max,ut=Math.min;const dt=function(t,e,r){var i,n,s,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var r=i,s=n;return i=n=void 0,c=e,o=t.apply(s,r)}function p(t){return c=t,a=setTimeout(g,e),h?f(t):o}function m(t){var r=t-l;return void 0===l||r>=e||r<0||u&&t-c>=s}function g(){var t=j();if(m(t))return v(t);a=setTimeout(g,function(t){var r=e-(t-l);return u?ut(r,s-(t-c)):r}(t))}function v(t){return a=void 0,d&&i?f(t):(i=n=void 0,o)}function b(){var t=j(),r=m(t);if(i=arguments,n=this,l=t,r){if(void 0===a)return p(l);if(u)return clearTimeout(a),a=setTimeout(g,e),f(l)}return void 0===a&&(a=setTimeout(g,e)),o}return e=ct(e)||0,W(r)&&(h=!!r.leading,s=(u="maxWait"in r)?ht(ct(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d),b.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=n=a=void 0},b.flush=function(){return void 0===a?o:v(j())},b};const ft=function(t,e,r){var i=!0,n=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return W(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),dt(t,e,{leading:i,maxWait:e,trailing:n})};var pt=function(){return(pt=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function mt(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window}function gt(t){return t&&t.ownerDocument?t.ownerDocument:document}var vt=function(t){return Array.prototype.reduce.call(t,(function(t,e){var r=e.name.match(/data-simplebar-(.+)/);if(r){var i=r[1].replace(/\W+(.)/g,(function(t,e){return e.toUpperCase()}));switch(e.value){case"true":t[i]=!0;break;case"false":t[i]=!1;break;case void 0:t[i]=!0;break;default:t[i]=e.value}}return t}),{})};function bt(t,e){var r;t&&(r=t.classList).add.apply(r,e.split(" "))}function xt(t,e){t&&e.split(" ").forEach((function(e){t.classList.remove(e)}))}function yt(t){return".".concat(t.split(" ").join("."))}var wt=!("undefined"==typeof window||!window.document||!window.document.createElement),kt=Object.freeze({__proto__:null,addClasses:bt,canUseDOM:wt,classNamesToQuery:yt,getElementDocument:gt,getElementWindow:mt,getOptions:vt,removeClasses:xt}),Et=null,Lt=null;function St(){if(null===Et){if("undefined"==typeof document)return Et=0;var t=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e);var r=e.getBoundingClientRect().right;t.removeChild(e),Et=r}return Et}wt&&window.addEventListener("resize",(function(){Lt!==window.devicePixelRatio&&(Lt=window.devicePixelRatio,Et=null)}));var Tt=mt,Ot=gt,Pt=vt,It=bt,Dt=xt,At=yt,Nt=function(){function t(e,r){void 0===r&&(r={});var i=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.isDragging=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var t=Tt(i.el);i.scrollXTicking||(t.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0),i.scrollYTicking||(t.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0),i.isScrolling||(i.isScrolling=!0,It(i.el,i.classNames.scrolling)),i.showScrollbar("x"),i.showScrollbar("y"),i.onStopScrolling()},this.scrollX=function(){i.axis.x.isOverflowing&&i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.axis.y.isOverflowing&&i.positionScrollbar("y"),i.scrollYTicking=!1},this._onStopScrolling=function(){Dt(i.el,i.classNames.scrolling),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isScrolling=!1},this.onMouseEnter=function(){i.isMouseEntering||(It(i.el,i.classNames.mouseEntered),i.showScrollbar("x"),i.showScrollbar("y"),i.isMouseEntering=!0),i.onMouseEntered()},this._onMouseEntered=function(){Dt(i.el,i.classNames.mouseEntered),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isMouseEntering=!1},this._onMouseMove=function(t){i.mouseX=t.clientX,i.mouseY=t.clientY,(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseMoveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseMoveForAxis("y")},this.onMouseLeave=function(){i.onMouseMove.cancel(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseLeaveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseLeaveForAxis("y"),i.mouseX=-1,i.mouseY=-1},this._onWindowResize=function(){i.scrollbarWidth=i.getScrollbarWidth(),i.hideNativeScrollbar()},this.onPointerEvent=function(t){var e,r;i.axis.x.track.el&&i.axis.y.track.el&&i.axis.x.scrollbar.el&&i.axis.y.scrollbar.el&&(i.axis.x.track.rect=i.axis.x.track.el.getBoundingClientRect(),i.axis.y.track.rect=i.axis.y.track.el.getBoundingClientRect(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&(e=i.isWithinBounds(i.axis.x.track.rect)),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&(r=i.isWithinBounds(i.axis.y.track.rect)),(e||r)&&(t.stopPropagation(),"pointerdown"===t.type&&"touch"!==t.pointerType&&(e&&(i.axis.x.scrollbar.rect=i.axis.x.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.x.scrollbar.rect)?i.onDragStart(t,"x"):i.onTrackClick(t,"x")),r&&(i.axis.y.scrollbar.rect=i.axis.y.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.y.scrollbar.rect)?i.onDragStart(t,"y"):i.onTrackClick(t,"y")))))},this.drag=function(e){var r,n,s,o,a,l,c,h,u,d,f;if(i.draggedAxis&&i.contentWrapperEl){var p=i.axis[i.draggedAxis].track,m=null!==(n=null===(r=p.rect)||void 0===r?void 0:r[i.axis[i.draggedAxis].sizeAttr])&&void 0!==n?n:0,g=i.axis[i.draggedAxis].scrollbar,v=null!==(o=null===(s=i.contentWrapperEl)||void 0===s?void 0:s[i.axis[i.draggedAxis].scrollSizeAttr])&&void 0!==o?o:0,b=parseInt(null!==(l=null===(a=i.elStyles)||void 0===a?void 0:a[i.axis[i.draggedAxis].sizeAttr])&&void 0!==l?l:"0px",10);e.preventDefault(),e.stopPropagation();var x=("y"===i.draggedAxis?e.pageY:e.pageX)-(null!==(h=null===(c=p.rect)||void 0===c?void 0:c[i.axis[i.draggedAxis].offsetAttr])&&void 0!==h?h:0)-i.axis[i.draggedAxis].dragOffset,y=(x="x"===i.draggedAxis&&i.isRtl?(null!==(d=null===(u=p.rect)||void 0===u?void 0:u[i.axis[i.draggedAxis].sizeAttr])&&void 0!==d?d:0)-g.size-x:x)/(m-g.size)*(v-b);"x"===i.draggedAxis&&i.isRtl&&(y=(null===(f=t.getRtlHelpers())||void 0===f?void 0:f.isScrollingToNegative)?-y:y),i.contentWrapperEl[i.axis[i.draggedAxis].scrollOffsetAttr]=y}},this.onEndDrag=function(t){i.isDragging=!1;var e=Ot(i.el),r=Tt(i.el);t.preventDefault(),t.stopPropagation(),Dt(i.el,i.classNames.dragging),i.onStopScrolling(),e.removeEventListener("mousemove",i.drag,!0),e.removeEventListener("mouseup",i.onEndDrag,!0),i.removePreventClickId=r.setTimeout((function(){e.removeEventListener("click",i.preventClick,!0),e.removeEventListener("dblclick",i.preventClick,!0),i.removePreventClickId=null}))},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=e,this.options=pt(pt({},t.defaultOptions),r),this.classNames=pt(pt({},t.defaultOptions.classNames),r.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!=typeof this.el||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=ft(this._onMouseMove,64),this.onWindowResize=dt(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=dt(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=dt(this._onMouseEntered,this.stopScrollDelay),this.init()}return t.getRtlHelpers=function(){if(t.rtlHelpers)return t.rtlHelpers;var e=document.createElement("div");e.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var r=e.firstElementChild,i=null==r?void 0:r.firstElementChild;if(!i)return null;document.body.appendChild(r),r.scrollLeft=0;var n=t.getOffset(r),s=t.getOffset(i);r.scrollLeft=-999;var o=t.getOffset(i);return document.body.removeChild(r),t.rtlHelpers={isScrollOriginAtZero:n.left!==s.left,isScrollingToNegative:s.left!==o.left},t.rtlHelpers},t.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:St()}catch(t){return St()}},t.getOffset=function(t){var e=t.getBoundingClientRect(),r=Ot(t),i=Tt(t);return{top:e.top+(i.pageYOffset||r.documentElement.scrollTop),left:e.left+(i.pageXOffset||r.documentElement.scrollLeft)}},t.prototype.init=function(){wt&&(this.initDOM(),this.rtlHelpers=t.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.prototype.initDOM=function(){var t,e;this.wrapperEl=this.el.querySelector(At(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(At(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(At(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(At(this.classNames.offset)),this.maskEl=this.el.querySelector(At(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,At(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(At(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(At(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(At(this.classNames.track)).concat(At(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(At(this.classNames.track)).concat(At(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(t=this.axis.x.track.el)||void 0===t?void 0:t.querySelector(At(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(e=this.axis.y.track.el)||void 0===e?void 0:e.querySelector(At(this.classNames.scrollbar)))||null,this.options.autoHide||(It(this.axis.x.scrollbar.el,this.classNames.visible),It(this.axis.y.scrollbar.el,this.classNames.visible))},t.prototype.initListeners=function(){var t,e=this,r=Tt(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(t=this.contentWrapperEl)||void 0===t||t.addEventListener("scroll",this.onScroll),r.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var i=!1,n=r.ResizeObserver||ResizeObserver;this.resizeObserver=new n((function(){i&&r.requestAnimationFrame((function(){e.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),r.requestAnimationFrame((function(){i=!0}))}this.mutationObserver=new r.MutationObserver((function(){r.requestAnimationFrame((function(){e.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},t.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var t=Tt(this.el);this.elStyles=t.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var e=this.contentEl.offsetWidth,r=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||e>0,n=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,o=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=r?"auto":"100%",this.placeholderEl.style.width=i?"".concat(e||l,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==e&&l>e,this.axis.y.isOverflowing=a>c,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==o&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var h=this.axis.x.isOverflowing?this.scrollbarWidth:0,u=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&l>n-u,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>c-h,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},t.prototype.getScrollbarSize=function(t){var e,r;if(void 0===t&&(t="y"),!this.axis[t].isOverflowing||!this.contentEl)return 0;var i,n=this.contentEl[this.axis[t].scrollSizeAttr],s=null!==(r=null===(e=this.axis[t].track.el)||void 0===e?void 0:e[this.axis[t].offsetSizeAttr])&&void 0!==r?r:0,o=s/n;return i=Math.max(~~(o*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(i=Math.min(i,this.options.scrollbarMaxSize)),i},t.prototype.positionScrollbar=function(e){var r,i,n;void 0===e&&(e="y");var s=this.axis[e].scrollbar;if(this.axis[e].isOverflowing&&this.contentWrapperEl&&s.el&&this.elStyles){var o=this.contentWrapperEl[this.axis[e].scrollSizeAttr],a=(null===(r=this.axis[e].track.el)||void 0===r?void 0:r[this.axis[e].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[e].sizeAttr],10),c=this.contentWrapperEl[this.axis[e].scrollOffsetAttr];c="x"===e&&this.isRtl&&(null===(i=t.getRtlHelpers())||void 0===i?void 0:i.isScrollOriginAtZero)?-c:c,"x"===e&&this.isRtl&&(c=(null===(n=t.getRtlHelpers())||void 0===n?void 0:n.isScrollingToNegative)?c:-c);var h=c/(o-l),u=~~((a-s.size)*h);u="x"===e&&this.isRtl?-u+(a-s.size):u,s.el.style.transform="x"===e?"translate3d(".concat(u,"px, 0, 0)"):"translate3d(0, ".concat(u,"px, 0)")}},t.prototype.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=this.axis[t].track.el,r=this.axis[t].scrollbar.el;e&&r&&this.contentWrapperEl&&(this.axis[t].isOverflowing||this.axis[t].forceVisible?(e.style.visibility="visible",this.contentWrapperEl.style[this.axis[t].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(t))):(e.style.visibility="hidden",this.contentWrapperEl.style[this.axis[t].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(t))),this.axis[t].isOverflowing?r.style.display="block":r.style.display="none")},t.prototype.showScrollbar=function(t){void 0===t&&(t="y"),this.axis[t].isOverflowing&&!this.axis[t].scrollbar.isVisible&&(It(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!0)},t.prototype.hideScrollbar=function(t){void 0===t&&(t="y"),this.isDragging||this.axis[t].isOverflowing&&this.axis[t].scrollbar.isVisible&&(Dt(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!1)},t.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},t.prototype.onMouseMoveForAxis=function(t){void 0===t&&(t="y");var e=this.axis[t];e.track.el&&e.scrollbar.el&&(e.track.rect=e.track.el.getBoundingClientRect(),e.scrollbar.rect=e.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(e.track.rect)?(this.showScrollbar(t),It(e.track.el,this.classNames.hover),this.isWithinBounds(e.scrollbar.rect)?It(e.scrollbar.el,this.classNames.hover):Dt(e.scrollbar.el,this.classNames.hover)):(Dt(e.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)))},t.prototype.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),Dt(this.axis[t].track.el,this.classNames.hover),Dt(this.axis[t].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)},t.prototype.onDragStart=function(t,e){var r;void 0===e&&(e="y"),this.isDragging=!0;var i=Ot(this.el),n=Tt(this.el),s=this.axis[e].scrollbar,o="y"===e?t.pageY:t.pageX;this.axis[e].dragOffset=o-((null===(r=s.rect)||void 0===r?void 0:r[this.axis[e].offsetAttr])||0),this.draggedAxis=e,It(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.onTrackClick=function(t,e){var r,i,n,s,o=this;void 0===e&&(e="y");var a=this.axis[e];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){t.preventDefault();var l=Tt(this.el);this.axis[e].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var c=null!==(i=null===(r=this.axis[e].scrollbar.rect)||void 0===r?void 0:r[this.axis[e].offsetAttr])&&void 0!==i?i:0,h=parseInt(null!==(s=null===(n=this.elStyles)||void 0===n?void 0:n[this.axis[e].sizeAttr])&&void 0!==s?s:"0px",10),u=this.contentWrapperEl[this.axis[e].scrollOffsetAttr],d=("y"===e?this.mouseY-c:this.mouseX-c)<0?-1:1,f=-1===d?u-h:u+h,p=function(){o.contentWrapperEl&&(-1===d?u>f&&(u-=40,o.contentWrapperEl[o.axis[e].scrollOffsetAttr]=u,l.requestAnimationFrame(p)):u<f&&(u+=40,o.contentWrapperEl[o.axis[e].scrollOffsetAttr]=u,l.requestAnimationFrame(p)))};p()}},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var t=Tt(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},t.prototype.unMount=function(){this.removeListeners()},t.prototype.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},t.prototype.findChild=function(t,e){var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;return Array.prototype.filter.call(t.children,(function(t){return r.call(t,e)}))[0]},t.rtlHelpers=null,t.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",tabIndex:0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},t.getOptions=Pt,t.helpers=kt,t}(),Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};var Mt=Nt.helpers,zt=Mt.getOptions,Ht=Mt.addClasses,Ct=Mt.canUseDOM,Wt=function(t){function e(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=t.apply(this,r)||this;return e.instances.set(r[0],n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(t){"init"===t.getAttribute("data-simplebar")||e.instances.has(t)||new e(t,zt(t.attributes))}))},e.removeObserver=function(){var t;null===(t=e.globalObserver)||void 0===t||t.disconnect()},e.prototype.initDOM=function(){var t,e,r,i=this;if(!Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(i.classNames.wrapper)})).length){for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),Ht(this.wrapperEl,this.classNames.wrapper),Ht(this.contentWrapperEl,this.classNames.contentWrapper),Ht(this.offsetEl,this.classNames.offset),Ht(this.maskEl,this.classNames.mask),Ht(this.contentEl,this.classNames.contentEl),Ht(this.placeholderEl,this.classNames.placeholder),Ht(this.heightAutoObserverWrapperEl,this.classNames.heightAutoObserverWrapperEl),Ht(this.heightAutoObserverEl,this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl),null===(t=this.contentWrapperEl)||void 0===t||t.setAttribute("tabindex",this.options.tabIndex.toString()),null===(e=this.contentWrapperEl)||void 0===e||e.setAttribute("role","region"),null===(r=this.contentWrapperEl)||void 0===r||r.setAttribute("aria-label",this.options.ariaLabel)}if(!this.axis.x.track.el||!this.axis.y.track.el){var n=document.createElement("div"),s=document.createElement("div");Ht(n,this.classNames.track),Ht(s,this.classNames.scrollbar),n.appendChild(s),this.axis.x.track.el=n.cloneNode(!0),Ht(this.axis.x.track.el,this.classNames.horizontal),this.axis.y.track.el=n.cloneNode(!0),Ht(this.axis.y.track.el,this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}Nt.prototype.initDOM.call(this),this.el.setAttribute("data-simplebar","init")},e.prototype.unMount=function(){Nt.prototype.unMount.call(this),e.instances.delete(this.el)},e.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(e.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},e.handleMutations=function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?!e.instances.has(t)&&document.documentElement.contains(t)&&new e(t,zt(t.attributes)):t.querySelectorAll("[data-simplebar]").forEach((function(t){"init"!==t.getAttribute("data-simplebar")&&!e.instances.has(t)&&document.documentElement.contains(t)&&new e(t,zt(t.attributes))})))})),t.removedNodes.forEach((function(t){var r;1===t.nodeType&&("init"===t.getAttribute("data-simplebar")?!document.documentElement.contains(t)&&(null===(r=e.instances.get(t))||void 0===r||r.unMount()):Array.prototype.forEach.call(t.querySelectorAll('[data-simplebar="init"]'),(function(t){var r;!document.documentElement.contains(t)&&(null===(r=e.instances.get(t))||void 0===r||r.unMount())})))}))}))},e.instances=new WeakMap,e}(Nt);Ct&&Wt.initHtmlApi();r(708);var Bt=function(){function t(e,r){var i,n,s;if(l(this,t),u(this,"elem",void 0),u(this,"origScrollElem",void 0),u(this,"currentPage",void 0),u(this,"totalPages",void 0),u(this,"fillerHeight",void 0),u(this,"scroll",void 0),u(this,"safeLimit",void 0),u(this,"scrollPercent",void 0),u(this,"sizeOfPercentByOnePage",void 0),u(this,"sizeOfPercentByLastPage",0),u(this,"sizeOfScrollByOnePage",void 0),u(this,"sizeOfScrollByLastPage",0),u(this,"isPageChanged",!1),u(this,"isLastPage",!1),u(this,"scrollRatio",void 0),u(this,"setHeight",void 0),u(this,"isSyncing",!1),u(this,"deviceType",void 0),u(this,"browserName",void 0),this.currentPage=1,this.totalPages=1,this.fillerHeight=1,this.scroll=1,this.safeLimit=11100,this.scrollPercent=0,this.sizeOfPercentByOnePage=1,this.sizeOfScrollByOnePage=1,this.scrollRatio=1,this.deviceType=(i="ontouchstart"in window||navigator.maxTouchPoints>0,n=window.innerWidth,i?n<=767?"mobile":n<=1024?"tablet":"touchDesktop":"desktop"),this.browserName=(s=navigator.userAgent,/Edg\//.test(s)?"microsoftEdge":/OPR\//.test(s)?"opera":!/Chrome\//.test(s)||/Edg\//.test(s)||/OPR\//.test(s)?/Safari\//.test(s)&&!/Chrome\//.test(s)?"safari":/Firefox\//.test(s)?"mozillaFirefox":/MSIE|Trident/.test(s)?"internetExplorer":void 0:"googleChrome"),this.elem=document.createElement("div"),this.elem.classList.add("vSrcollbar"),this.elem.classList.add("vSrcollbar_".concat(this.browserName)),e&&this.elem.classList.add("vSrcollbar_debugMode"),"desktop"!==this.deviceType)new Wt(this.elem,{autoHide:!1,scrollbarMinSize:60,forceVisible:"y",clickOnTrack:!0});this.elem.addEventListener("scroll",r)}return h(t,[{key:"init",value:function(t){var e=t.totalHeight,r=t.realHeight,i=t.fullLength,n=t.listLength,s=t.lastPageLength,o=t.origScrollElem;this.origScrollElem=o,this.createFiller(r),this.countTotalPages(i,n,e),this.setScrollRatio(i,n,s),this.sizeOfPercentByOnePage=1/this.totalPages*this.scrollRatio,this.sizeOfScrollByOnePage=this.fillerHeight/this.totalPages*this.scrollRatio}},{key:"createFiller",value:function(t){var e,r,i=document.createElement("div");i.classList.add("vScrollbarFiller"),i.style.height="".concat(t,"px"),this.fillerHeight=t-(null===(e=this.origScrollElem)||void 0===e?void 0:e.clientHeight),null===(r=this.origScrollElem)||void 0===r||r.clientHeight,this.elem.append(i)}},{key:"countTotalPages",value:function(t,e,r){new Intl.NumberFormat("ru-RU").format(r),new Intl.NumberFormat("ru-RU").format(33554400),new Intl.NumberFormat("ru-RU").format(this.safeLimit);var i=e;i>t&&(i=t);var n=t%i,s=(t-n)/i+(0===n?0:1);return this.totalPages=s,s}},{key:"handleScroll",value:function(){this.scroll=this.elem.scrollTop,this.syncScrollState()}},{key:"setScrollFromOuterSrc",value:function(t,e){var r=this.sizeOfScrollByOnePage*(this.currentPage-1)+t*this.scrollRatio/this.totalPages,i=!1;if("down"===e&&t>=this.fillerHeight&&this.currentPage<this.totalPages?(i=!0,this.currentPage++):"up"===e&&t<=1&&this.currentPage>1&&(i=!0,this.currentPage--),this.scroll=r,this.elem.scrollTop=this.scroll,this.isLastPage=this.currentPage===this.totalPages,i){this.setScrollPercent(),this.isPageChanged=!0;var n="up"===e&&this.currentPage===this.totalPages-1;this.setHeight&&n&&this.setHeight(),this.setScrollToOrigScrollElem(e,i)}}},{key:"syncScrollState",value:function(t){this.setScrollPercent(),this.setCurrentPage(),this.setScrollToOrigScrollElem(t)}},{key:"setCurrentPage",value:function(){var t=this.getPageByScroll();this.isPageChanged=this.currentPage!==t,this.currentPage=t,this.isLastPage=this.currentPage===this.totalPages}},{key:"setScrollToOrigScrollElem",value:function(t,e){if(e)this.origScrollElem.scrollTop="down"===t?1:this.fillerHeight-1;else{var r=(this.currentPage-1)*this.sizeOfPercentByOnePage,i=(this.scrollPercent-r)*this.totalPages,n=this.fillerHeight*i/this.scrollRatio;this.origScrollElem.scrollTop=n}}},{key:"setScrollPercent",value:function(){this.scrollPercent=this.scroll/this.fillerHeight}},{key:"getPageByScroll",value:function(){var t=this.scrollPercent*this.totalPages/this.scrollRatio;return Math.ceil(t)||1}},{key:"setScrollRatio",value:function(t,e){var r=e*this.totalPages,i=t;this.scrollRatio=r/i,this.scrollRatio}}]),t}();function Ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var jt,_t=function(){function t(e){l(this,t),u(this,"storeName",void 0),this.storeName=e}var e,r,i,n,s,o,c,d,p,m,g,v,b,x;return h(t,[{key:"addToWaitingQueue",value:function(e){var r=this;return new Promise((function(i){t.waitingQueue.slice(),t.waitingQueue.push(a(f().mark((function t(){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,e();case 3:r=t.sent,i(r);case 6:case"end":return t.stop()}}),t)})))),t.isWorking||r.handleQueue()}))}},{key:"handleQueue",value:(x=a(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isWorking){e.next=2;break}return e.abrupt("return");case 2:t.isWorking=!0,(r=function(){var e=a(f().mark((function e(){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.waitingQueue.length){e.next=3;break}return t.isWorking=!1,e.abrupt("return");case 3:return t.waitingQueue.length,i=t.waitingQueue.shift(),e.next=8,null==i?void 0:i();case 8:r();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 5:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)})},{key:"queuedOpenDb",value:(b=a(f().mark((function e(r){var i,n,s,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDatabase(t.TTL_STORE);case 2:return i=e.sent,n=i.transaction(t.TTL_STORE,"readwrite"),s=n.objectStore(t.TTL_STORE),o={storeName:this.storeName,createdAt:Date.now(),ttlMs:r},s.put(o),e.abrupt("return",new Promise((function(t){n.oncomplete=function(){i.close(),t(o)}})));case 8:case"end":return e.stop()}}),e,this)}))),function(t){return b.apply(this,arguments)})},{key:"setTTL",value:(v=a(f().mark((function t(e){var r,i,n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addToWaitingQueue(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.queuedOpenDb(e));case 1:case"end":return t.stop()}}),t)}))));case 2:return r=t.sent,i=Ut(Ut({},r),{},{createdAt:new Date(r.createdAt).toLocaleString()}),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"openDatabase",value:(g=a(f().mark((function e(r){var i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var s=indexedDB.open(t.DB_NAME);s.onupgradeneeded=function(){var e=s.result;e.objectStoreNames.contains(t.TTL_STORE)||e.createObjectStore(t.TTL_STORE,{keyPath:"storeName"}),e.objectStoreNames.contains(r)||e.createObjectStore(r)},s.onsuccess=function(){i.storeName;var o=s.result;if(i.storeName,o.objectStoreNames.contains(r),o.objectStoreNames.contains(r))i.storeName,Array.from(o.objectStoreNames).slice(),o.objectStoreNames,e(o);else{i.storeName,o.close();var a=indexedDB.open(t.DB_NAME,o.version+1);a.onupgradeneeded=function(){i.storeName,a.result.createObjectStore(r)},a.onsuccess=function(){return e(a.result)},a.onerror=function(){return n(a.error)}}},s.onerror=function(){return n(s.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(t){return g.apply(this,arguments)})},{key:"isExpired",value:(m=a(f().mark((function e(){var r,i,n,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDatabase(t.TTL_STORE);case 2:return r=e.sent,i=r.transaction(t.TTL_STORE,"readonly"),n=i.objectStore(t.TTL_STORE),s=n.get(this.storeName),e.abrupt("return",new Promise((function(t){s.onsuccess=function(){r.close();var e=s.result;if(!e)return t(!1);t(Date.now()>e.createdAt+e.ttlMs)},s.onerror=function(){r.close(),t(!1)}})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"clearIfExpired",value:(p=a(f().mark((function t(){var e,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isExpired();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return console.warn("Your data in store '".concat(this.storeName,"' is expired!")),t.next=8,this.openDatabase(this.storeName);case 8:return e=t.sent,(r=e.transaction(this.storeName,"readwrite")).objectStore(this.storeName).clear(),t.abrupt("return",new Promise((function(t){r.oncomplete=function(){e.close(),t()}})));case 12:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"write",value:(d=a(f().mark((function t(e,r){var i=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addToWaitingQueue(a(f().mark((function t(){var n,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.openDatabase(i.storeName);case 2:return n=t.sent,(s=n.transaction(i.storeName,"readwrite")).objectStore(i.storeName).put(r,e),t.abrupt("return",new Promise((function(t,e){s.oncomplete=function(){n.close(),t({})},s.onerror=function(){n.close(),e(s.error)}})));case 7:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"writeMany",value:(c=a(f().mark((function t(e){var r=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addToWaitingQueue(a(f().mark((function t(){var i,n,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.openDatabase(r.storeName);case 2:return i=t.sent,r.storeName,i.objectStoreNames,n=i.transaction(r.storeName,"readwrite"),s=n.objectStore(r.storeName),e.forEach((function(t){var e=t.value,r=t.index;if(!("id"in e))throw new Error('All objects must contain an "id" property to be used as the key.');s.put(e,r)})),t.abrupt("return",new Promise((function(t,e){n.oncomplete=function(){i.close(),t({})},n.onerror=function(){i.close(),e(n.error)}})));case 9:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"readAll",value:(o=a(f().mark((function t(){var e,r,i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.clearIfExpired();case 2:return t.next=4,this.openDatabase(this.storeName);case 4:return e=t.sent,r=e.transaction(this.storeName,"readonly"),i=r.objectStore(this.storeName),n=[],t.abrupt("return",new Promise((function(t,r){var s=i.openCursor();s.onsuccess=function(){var r=s.result;if(r){var i=r.key;n[i]=r.value,r.continue()}else e.close(),t(n)},s.onerror=function(){e.close(),r(s.error)}})));case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"readRange",value:(s=a(f().mark((function t(e,r){var i,n,s,o,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.clearIfExpired();case 2:return t.next=4,this.openDatabase(this.storeName);case 4:return i=t.sent,n=i.transaction(this.storeName,"readonly"),s=n.objectStore(this.storeName),o=IDBKeyRange.bound(e,r),a=new Array(r-e+1),t.abrupt("return",new Promise((function(t,r){var n=s.openCursor(o);n.onsuccess=function(){var r=n.result;if(r){var s=r.key;a[s-e]=r.value,r.continue()}else i.close(),t(a)},n.onerror=function(){i.close(),r(n.error)}})));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"get",value:(n=a(f().mark((function t(e){var r,i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.clearIfExpired(this.storeName);case 2:return t.next=4,this.openDatabase(this.storeName);case 4:return r=t.sent,i=r.transaction(this.storeName,"readonly"),n=i.objectStore(this.storeName),t.abrupt("return",new Promise((function(t,i){var s=n.get(e);s.onsuccess=function(){r.close(),t(s.result)},s.onerror=function(){r.close(),i(s.error)}})));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"has",value:(i=a(f().mark((function t(e){var r,i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.openDatabase(this.storeName);case 2:return r=t.sent,i=r.transaction(this.storeName,"readonly"),n=i.objectStore(this.storeName),t.abrupt("return",new Promise((function(t){var i=n.count(e);i.onsuccess=function(){r.close(),t(i.result>0)},i.onerror=function(){r.close(),t(!1)}})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getStoreSize",value:(r=a(f().mark((function t(){var e,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.openDatabase(this.storeName);case 2:return e=t.sent,r=e.transaction(this.storeName,"readonly"),i=r.objectStore(this.storeName),t.abrupt("return",new Promise((function(t,r){var n=i.count();n.onsuccess=function(){e.close(),t(n.result)},n.onerror=function(){e.close(),r(n.error)}})));case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],[{key:"build",value:function(e){return t.checkIndexedDBSupport().then((function(r){return new t(e)}),(function(t){}))}},{key:"checkIndexedDBSupport",value:(e=a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){if("indexedDB"in window){var r,i="support-test-".concat(Date.now()),n=indexedDB.open(i,1);n.onupgradeneeded=function(t){r=t.target.result},n.onsuccess=function(e){(r=e.target.result).close(),indexedDB.deleteDatabase(i),t("IndexedDB полностью поддерживается")},n.onerror=function(t){e(new Error("Ошибка при создании/открытии базы: ".concat(t.target.error)))},n.onblocked=function(t){e(new Error("Операция с IndexedDB заблокирована"))},setTimeout((function(){r&&r.close(),e(new Error("Таймаут при проверке IndexedDB"))}),5e3)}else e(new Error("IndexedDB не поддерживается браузером"))})));case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]),t}();u(_t,"DB_NAME","iScrollDB"),u(_t,"TTL_STORE","__ttl__"),u(_t,"waitingQueue",[]),u(_t,"isWorking",!1),function(t){t.Initial="initialization",t.Loading="loading data",t.Ready="ready",t.Error="error"}(jt||(jt={}));var Vt=function(){function t(e){l(this,t),u(this,"statusListeners",[]),u(this,"is",jt.Initial),u(this,"cb",void 0),this.cb=e}return h(t,[{key:"setStatus",value:function(t){this.is!==t&&(this.is=t,this.statusListeners.forEach((function(e){return e(t)})),this.cb&&this.cb(t))}},{key:"waitForStatus",value:function(t){var e=this;return this.is===t?Promise.resolve(this.is):new Promise((function(r,i){e.statusListeners.push((function n(s){s===t?(e.removeStatusListener(n),r(s)):s===jt.Error&&t!==jt.Error&&(e.removeStatusListener(n),i(new Error("Status changed to error while waiting for ".concat(t))))}))}))}},{key:"whenReady",value:function(){return this.waitForStatus(jt.Ready).then((function(){}))}},{key:"removeStatusListener",value:function(t){var e=this.statusListeners.indexOf(t);e>-1&&this.statusListeners.splice(e,1)}},{key:"reset",value:function(){this.setStatus(jt.Initial)}},{key:"isReady",get:function(){return this.is===jt.Ready}},{key:"isLoading",get:function(){return this.is===jt.Loading}},{key:"hasError",get:function(){return this.is===jt.Error}}]),t}(),Yt="background-color: lightgreen; color: white; font-weight: bold;",qt="background-color: gray; color: white; font-weight: bold;",Gt="background-color: tomato; color: white; font-weight: bold;",Xt="background-color: yellow; color: #333; font-weight: bold;",Qt=function(){function t(e){var r=this,i=e.context;l(this,t),u(this,"vsb",void 0),u(this,"fillerHeight",void 0),u(this,"scrollElem",void 0),u(this,"repeats",void 0),u(this,"scrollStepSize",void 0),u(this,"chunkHeight",void 0),u(this,"context",void 0),u(this,"run",{}),u(this,"scrollUp",(function(){return new Promise((function(t){for(var e=10*r.repeats+30,i=0;i<r.repeats;i++)setTimeout((function(){r.vsb.elem.scrollTop-=r.scrollStepSize}),10*i);setTimeout((function(){return t()}),e)}))})),u(this,"scrollDown",(function(){return new Promise((function(t){for(var e=10*r.repeats+30,i=0;i<r.repeats;i++)setTimeout((function(){r.vsb.elem.scrollTop+=r.scrollStepSize}),10*i);setTimeout((function(){return t()}),e)}))})),u(this,"scrollToNow",(function(t){return new Promise((function(e){r.scrollElem.scrollTop=t,setTimeout(e,0)}))})),u(this,"scrollTo",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(i){setTimeout(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.scrollToNow(t);case 2:i();case 3:case"end":return e.stop()}}),e)}))),e)}))})),u(this,"scrollToTop",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.scrollTo(0,t)})),u(this,"scrollToBottom",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.scrollTo(r.fillerHeight,t)})),u(this,"scrollToTopNow",(function(){return r.scrollToNow(0)})),u(this,"scrollToBottomNow",(function(){return r.scrollToNow(r.fillerHeight)})),this.context=i,this.vsb=i.vsb,this.fillerHeight=i.vsb.fillerHeight,this.scrollElem=i.vsb.elem,this.repeats=33,this.scrollStepSize=Math.ceil(this.fillerHeight/this.repeats),this.chunkHeight=i.chunk.htmlHeight,this.init()}var e,r;return h(t,[{key:"init",value:function(){this.createMethods()}},{key:"resetState",value:(r=a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.scrollToTopNow();case 3:return t.next=5,this.scrollDown();case 5:return t.next=7,this.scrollUp();case 7:return t.abrupt("return",Promise.resolve());case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"testStartSignal",value:(e=a(f().mark((function t(){var e,r,i,n=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=n.length>0&&void 0!==n[0]?n[0]:3,r=function(t){setTimeout((function(){"%c ".concat(t,"! ")}),1e3*(e-t))},i=e;i>0;i--)r(i);return t.abrupt("return",new Promise((function(t){setTimeout(t,1e3*e)})));case 4:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"createAsyncTestFunction",value:function(t,e){var r=this;return function(){var i=a(f().mark((function i(){var n,s,o=arguments;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:3,s=!(o.length>1&&void 0!==o[1])||o[1],r.context.testResults.currentTestName=t,i.next=5,r.testStartSignal(n);case 5:return"%c --- start  fn: ".concat(t,"  --- "),i.next=8,e();case 8:return"%c --- end  fn: ".concat(t,"  --- "),i.next=11,I(200);case 11:if(!s){i.next=14;break}return i.next=14,r.resetState();case 14:r.context.testResults.currentTestName="","%c --- END TEST: ".concat(t,"  --- ");case 16:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()}},{key:"createMethods",value:function(){var t=this;this.run.testLocalSimple100item=this.createAsyncTestFunction("LocalSimple100item",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollTo(3050,1e3);case 2:return e.next=4,t.scrollTo(2750,200);case 4:return e.next=6,t.scrollToTop(50);case 6:return e.next=8,t.scrollTo(1.5*t.chunkHeight,500);case 8:case"end":return e.stop()}}),e)})))),this.run.testRemoteSimple500item=this.createAsyncTestFunction("RemoteSimple500item",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollDown();case 2:return e.next=4,t.scrollUp();case 4:case"end":return e.stop()}}),e)})))),this.run.testRemoteLazyDummyjsonAPI=this.createAsyncTestFunction("testRemoteLazyDummyjsonAPI",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollToNow(900);case 2:return e.next=4,t.scrollToBottomNow();case 4:return e.next=6,t.scrollTo(0,300);case 6:return e.next=8,t.scrollTo(1.5*t.chunkHeight,300);case 8:return e.next=10,t.scrollTo(t.fillerHeight-1.5*t.chunkHeight,300);case 10:return e.next=12,t.scrollTo(3*t.chunkHeight,300);case 12:return e.next=14,t.scrollToNow(t.chunkHeight/2);case 14:return e.next=16,t.scrollDown();case 16:return e.next=18,t.scrollToTopNow();case 18:return e.next=20,t.scrollToNow(t.fillerHeight/2);case 20:return e.next=22,t.scrollDown();case 22:return e.next=24,t.scrollToNow(t.fillerHeight/2);case 24:return e.next=26,t.scrollUp();case 26:return console.warn("-------------------"),e.next=29,t.scrollToNow(900);case 29:return e.next=31,t.scrollToBottomNow();case 31:return e.next=33,t.scrollTo(0,300);case 33:return t.scrollUp(),e.next=36,t.scrollTo(1.5*t.chunkHeight,300);case 36:return e.next=38,t.scrollTo(t.fillerHeight-1.5*t.chunkHeight,300);case 38:return e.next=40,t.scrollDown().then(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.scrollTo(3*t.chunkHeight,400),t.scrollTo(5*t.chunkHeight,800),t.scrollTo(t.chunkHeight,1200),t.scrollToNow(t.chunkHeight/2),e.next=6,t.scrollUp();case 6:return e.next=8,t.scrollDown();case 8:return e.next=10,t.scrollUp();case 10:return e.next=12,t.scrollDown();case 12:return e.next=14,t.scrollUp();case 14:return e.next=16,t.scrollDown();case 16:return e.next=18,t.scrollUp();case 18:return e.next=20,t.scrollDown();case 20:return e.next=22,t.scrollUp();case 22:case"end":return e.stop()}}),e)}))));case 40:return e.next=42,t.scrollDown();case 42:return t.scrollToNow(t.fillerHeight/2),t.scrollTo(t.fillerHeight/2,1200),e.next=46,t.scrollDown();case 46:return t.scrollToNow(t.fillerHeight/2),e.next=49,t.scrollUp();case 49:case"end":return e.stop()}}),e)})))),this.run.smoothUpDownScrollDomTest=this.createAsyncTestFunction("smoothUpDownScrollDomTest",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollDown();case 2:return e.next=4,t.scrollUp();case 4:return e.next=6,t.scrollDown();case 6:return e.next=8,t.scrollUp();case 8:return e.next=10,t.scrollDown();case 10:return e.next=12,t.scrollUp();case 12:return e.next=14,t.scrollDown();case 14:return e.next=16,t.scrollUp();case 16:return e.next=18,t.scrollDown();case 18:return e.next=20,t.scrollUp();case 20:case"end":return e.stop()}}),e)})))),this.run.fastUpDownScrollDomTest=this.createAsyncTestFunction("fastUpDownScrollDomTest",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollToBottom();case 2:return e.next=4,t.scrollToTop(150);case 4:return e.next=6,t.scrollToBottom(150);case 6:return e.next=8,t.scrollToTop(150);case 8:return e.next=10,t.scrollToBottom(150);case 10:return e.next=12,t.scrollToTop(150);case 12:return e.next=14,t.scrollToBottom(150);case 14:return e.next=16,t.scrollToTop(150);case 16:return e.next=18,t.scrollToBottom(150);case 18:return e.next=20,t.scrollToTop(150);case 20:return e.next=22,t.scrollToBottom(150);case 22:return e.next=24,t.scrollToTop(150);case 24:case"end":return e.stop()}}),e)})))),this.run.chaoticScrollDomTest=this.createAsyncTestFunction("chaoticScrollDomTest",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollToNow(900);case 2:return e.next=4,t.scrollToBottomNow();case 4:return e.next=6,t.scrollTo(0,300);case 6:return e.next=8,t.scrollTo(1.5*t.chunkHeight,300);case 8:return e.next=10,t.scrollTo(t.fillerHeight-1.5*t.chunkHeight,300);case 10:return e.next=12,t.scrollTo(3*t.chunkHeight,300);case 12:return e.next=14,t.scrollToNow(t.chunkHeight/2);case 14:return e.next=16,t.scrollDown();case 16:return e.next=18,t.scrollToTopNow();case 18:return e.next=20,t.scrollToNow(t.fillerHeight/2);case 20:return e.next=22,t.scrollDown();case 22:return e.next=24,t.scrollToNow(t.fillerHeight/2);case 24:return e.next=26,t.scrollUp();case 26:case"end":return e.stop()}}),e)})))),this.run.asyncChaoticScrollDomTest=this.createAsyncTestFunction("asyncChaoticScrollDomTest",a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.scrollToNow(900);case 2:return e.next=4,t.scrollToBottomNow();case 4:return e.next=6,t.scrollTo(0,300);case 6:return t.scrollUp(),e.next=9,t.scrollTo(1.5*t.chunkHeight,300);case 9:return e.next=11,t.scrollTo(t.fillerHeight-1.5*t.chunkHeight,300);case 11:return e.next=13,t.scrollDown().then(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.scrollTo(3*t.chunkHeight,400),t.scrollTo(5*t.chunkHeight,800),t.scrollTo(t.chunkHeight,1200),t.scrollToNow(t.chunkHeight/2),e.next=6,t.scrollUp();case 6:return e.next=8,t.scrollDown();case 8:return e.next=10,t.scrollUp();case 10:return e.next=12,t.scrollDown();case 12:return e.next=14,t.scrollUp();case 14:return e.next=16,t.scrollDown();case 16:return e.next=18,t.scrollUp();case 18:return e.next=20,t.scrollDown();case 20:return e.next=22,t.scrollUp();case 22:case"end":return e.stop()}}),e)}))));case 13:return e.next=15,t.scrollDown();case 15:return t.scrollToNow(t.fillerHeight/2),t.scrollTo(t.fillerHeight/2,1200),e.next=19,t.scrollDown();case 19:return t.scrollToNow(t.fillerHeight/2),e.next=22,t.scrollUp();case 22:case"end":return e.stop()}}),e)}))))}}]),t}(),$t=console.log;function Jt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=a(f().mark((function t(){var e,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){$t("%c ☆ Тест завершен! ☆ ",qt);var t=Array.from(this.testResults.errors).reduce((function(t,e){return t+e[1].length}),0);0!==this.testResults.errors.size?($t("%c Тестов не пройдено: ".concat(this.testResults.errors.size," <----"),Xt),$t("%c Ошибок обнаружено: ".concat(t," <----"),Gt),this.testResults.errors.forEach((function(t,e){var r=t;$t("%c Тест: ".concat(e),Gt),r.forEach((function(t,e){$t(e+1,t)}))}))):$t("%c ☆☆☆☆☆ Все тесты завершены без ошибок! Поздравляю! ☆☆☆☆☆",Yt)},this.testResults.errors.clear(),this.testResults.listName="".concat(this.testResults.listName," (").concat(this.vsb.deviceType," - ").concat(this.vsb.browserName,")"),e=new Qt({context:this}),i=!0,t.next=9,e.run.fastUpDownScrollDomTest(1,i);case 9:return t.next=11,e.run.chaoticScrollDomTest(1,i);case 11:return t.next=13,e.run.asyncChaoticScrollDomTest(1,i);case 13:return t.next=15,e.run.smoothUpDownScrollDomTest(1,i);case 15:return t.next=17,e.run.testLocalSimple100item(1,i);case 17:return t.next=19,e.run.testRemoteLazyDummyjsonAPI(1,i);case 19:return t.next=22,e.run.testRemoteSimple500item(1);case 22:return r.call(this),t.abrupt("return",Promise.resolve(this.testResults));case 24:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Zt(t,e,r,i){var n="down"===t?r+e:r-i;return n<0&&(n=0),n}var te={list:"UL",table:"TABLE",div:"DIV"},ee={en:{error:{cantFetchData:"Failed to load data from server. Please check server availability or try again later",zeroHeight:"Your list height is less than 10px. You need to set your list-height from STYLES (by css) or pass like property in JS",elementNotExist:"This element does not exist in DOM",undefinedProps:"Some of props for RenderController is undefined",domManagerIsUndefined:"Your DomManager is undefined",renderControllerIsUndefined:"RenderController (this.render) is not exist",dataIsUndefined:"You does not have list.data",notValidUrl:"Your dataUrl is not a valid URL; or returned value is not a  valid URL",notArray:"Your list does not have Array type",zeroListSize:"Your list does not have length or length is 0",noTargetElem:"You do not have HTML-element for your list",noDataUrl:"You try to call getListDataLazy, but you dont have dataUrl",dataUrlNotAFn:"You try to call getListDataLazy, but your dataUrl is a string type",fetchedIsNotArray:"Your fetched data does not have Array type"},message:{localMode:"Failed to load data from server. \nUsing previously saved data",tryLoadData:"Try to load data again",noCacheMode:"Data caching is not supported"}},ru:{error:{cantFetchData:"Не удалось загрузить данные с сервера. Проверьте доступность сервера или попробуйте позже",zeroHeight:"Высота вашего списка меньше чем 10px. Вам нужно установить высоту вашего списка из СТИЛЕЙ (через CSS) или передавать как свойство в JS",elementNotExist:"Такого элемента не существует в DOM",undefinedProps:"Некоторые свойства для RenderController не определены",domManagerIsUndefined:"Ваш DomManager не определён",renderControllerIsUndefined:"RenderController (this.render) не существует",dataIsUndefined:"У вас отсутствует list.data",notValidUrl:"Ваш dataUrl не является правильной URL-ссылкой или возвращает неправильную ссылку (исправьте dataUrl в свойствах при запуске InfinityScroll)",notArray:"Ваш список не является массивом (Array). Проверьте, что вы передаёте внутрь InfinityScroll",zeroListSize:"Ваш список пуст или его размер равен 0",noTargetElem:"Вы не указали HTML-элемент для вашего списка",noDataUrl:"Вы пытаетесь вызвать getListDataLazy, но у вас нет dataUrl (ссылки)",dataUrlNotAFn:"Вы пытаетесь вызвать getListDataLazy, но ваш dataUrl является строкой",fetchedIsNotArray:"Ваши загруженные данные не являются Массивом (Array)"},message:{localMode:"Не удалось загрузить данные с сервера. \nИспользуются ранее сохранённые данные",tryLoadData:"Попробовать загрузить данные ещё раз",noCacheMode:"Кэширование данных не поддерживается"}}}["ru"===navigator.language.split("-")[0]?"ru":"en"],re=function(){function t(e){var r=this;l(this,t),u(this,"timerIdRefreshList",void 0),u(this,"name",void 0),u(this,"selectorId",void 0),u(this,"wrapperEl",void 0),u(this,"middleWrapper",void 0),u(this,"subDir",void 0),u(this,"forcedListLength",void 0),u(this,"listType",void 0),u(this,"tHeadNames",void 0),u(this,"listWrapperHeight",void 0),u(this,"dataLoadPlace",void 0),u(this,"isLazy",void 0),u(this,"dataUrl",void 0),u(this,"includeEnd",void 0),u(this,"basedIndex",void 0),u(this,"isSyncing",void 0),u(this,"listEl",void 0),u(this,"onChangeStatus",void 0),u(this,"offsetElem",void 0),u(this,"domMngr",void 0),u(this,"scroll",void 0),u(this,"chunk",void 0),u(this,"list",void 0),u(this,"render",void 0),u(this,"skeleton",void 0),u(this,"vsb",void 0),u(this,"dbmanager",void 0),u(this,"isDebugMode",!1),u(this,"test",void 0),u(this,"testResults",void 0),u(this,"status",void 0),u(this,"sleep",(function(t){return new Promise((function(e){return setTimeout(e,t)}))})),this.selectorId=e.selectorId;var i=document.getElementById(e.selectorId);null===i&&this.throwError("".concat(e.selectorId," - ").concat(ee.error.elementNotExist)),this.wrapperEl=i,this.subDir=e.subDir,this.forcedListLength=e.forcedListLength,this.listType=e.listType||"list",this.tHeadNames=e.tHeadNames,this.listWrapperHeight=e.listWrapperHeight,this.isDebugMode=e.isDebugMode||!1,this.listEl=this.createInnerList(),this.onChangeStatus=function(t){r.middleWrapper.dataset.status=t},this.status=new Vt(this.onChangeStatus),this.scroll=new m,this.chunk=new g,this.list=new v,this.vsb=new Bt(this.isDebugMode,(function(){r.isSyncing||(r.vsb.isSyncing=!0,r.scroll.setScrollDirection(r.vsb.elem.scrollTop,r.vsb.isPageChanged,r.vsb.isLastPage),r.vsb.handleScroll(),r.calcCurrentDOMRender(),requestAnimationFrame((function(){requestAnimationFrame((function(){r.vsb.scroll!==r.vsb.elem.scrollTop&&r.vsb.handleScroll(),r.vsb.isSyncing=!1}))})))})),this.skeleton=new C({template:e.templateString,templateCb:e.templateCb,listType:this.listType});var n={skeleton:this.skeleton,targetElem:this.listEl};this.domMngr=new D(n),this.dataLoadPlace=Array.isArray(e.data)?"local":"remote",this.isLazy=!1,this.includeEnd=!1,this.basedIndex=1,this.isSyncing=!1,this.test=Jt,this.testResults={listName:e.selectorId,currentTestName:"",errors:new Map},this.init(e)}var e,r,i,o,c,d,k,L,S,P,I,A,N,R;return h(t,[{key:"showHint",value:function(t,e){var r,i=z({tagName:"div",className:"warningHint",text:t}),n=z({tagName:"button",className:"warningHint__Btn",text:"OK!"});n.addEventListener("click",(function(t){t.stopPropagation(),i.classList.add("collapsed"),i.textContent="",n.remove(),e?e(i):i.remove()})),i.append(n),null===(r=this.wrapperEl)||void 0===r||r.prepend(i)}},{key:"showLocalModeHint",value:function(){var t=this;this.showHint(ee.message.localMode,(function(e){e.addEventListener("click",a(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return H(e,"active"),r.prev=2,r.next=5,t.getInitialListData(t.dataUrl);case 5:if(!(i=r.sent)){r.next=16;break}if(e.classList.remove("errorFetch"),H(e,"successFetch"),t.setInitialListData(i),!t.isLazy){r.next=14;break}return r.next=14,t.setInitialLazyRemoteData();case 14:t.domMngr.resetAllList(t.chunk,0,0,t.list,t.scroll.direction,t.vsb),setTimeout((function(){return e.remove()}),2e3);case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(2),e.classList.remove("successFetch"),H(e,"errorFetch");case 22:case"end":return r.stop()}}),r,null,[[2,18]])}))))}))}},{key:"throwError",value:function(t){throw this.status.setStatus(jt.Error),this.middleWrapper.dataset.error=t,new Error(t)}},{key:"init",value:(R=a(f().mark((function t(e){var r=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("remote"!==this.dataLoadPlace){t.next=8;break}return this.dataUrl=e.data,t.next=4,_t.build(this.selectorId);case 4:return this.dbmanager=t.sent,this.dbmanager||this.showHint(ee.message.noCacheMode),t.next=8,this.setIndexedDb();case 8:Promise.allSettled([this.getSavedListData(),this.getInitialListData(e.data)]).then(function(){var t=a(f().mark((function t(i){var n,o,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s(i,2),o=n[0],"rejected"!==(a=n[1]).status||"fulfilled"!==o.status||!o.value.length){t.next=8;break}r.showLocalModeHint(),r.setInitialListData(o.value),r.setListFulLength(o.value),t.next=15;break;case 8:if("fulfilled"!==a.status){t.next=14;break}return r.setInitialListData(a.value),t.next=12,r.setListFulLength(a.value,e.data);case 12:t.next=15;break;case 14:"rejected"===a.status&&r.throwError(ee.error.cantFetchData);case 15:r.setListLength(),r.start();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t,this)}))),function(t){return R.apply(this,arguments)})},{key:"start",value:(N=a(f().mark((function t(){var e,r,i,n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setDefaultStyles(),this.getAllSizes(),this.offsetElem=document.createElement("div"),this.offsetElem.classList.add("offsetElem"),this.middleWrapper.prepend(this.offsetElem),this.domMngr.offsetElem=this.offsetElem,!this.isLazy){t.next=10;break}return t.next=10,this.setInitialLazyRemoteData();case 10:this.vsb.setHeight=function(){return n.domMngr.setHeightToList(n.list)},this.chunk.lastPageLastRenderIndex=this.list.lastPageLength>this.list.halfOfExistingSizeInDOM?this.list.lastPageLength-this.list.halfOfExistingSizeInDOM:1,b(i={lastRenderIndex:this.chunk.lastRenderIndex,lastPageLastRenderIndex:this.chunk.lastPageLastRenderIndex,listLength:this.list.length,listlastPageLength:this.list.lastPageLength,chunkAmount:this.chunk.amount})&&this.throwError(ee.error.undefinedProps),this.render=new p(i),this.domMngr.fillList(this.list),this.domMngr.setHeightToList(this.list),this.scroll.maxScroll=this.list.length*this.list.itemHeight-(null===(e=this.middleWrapper)||void 0===e?void 0:e.clientHeight),this.scroll.lastPageMaxScroll=this.list.lastPageLength*this.list.itemHeight-(null===(r=this.middleWrapper)||void 0===r?void 0:r.clientHeight),this.createVirtualScroll(),this.middleWrapper.addEventListener("scroll",(function(t){if(!n.vsb.isSyncing){if(n.isSyncing=!0,n.scroll.setScrollDirection(n.middleWrapper.scrollTop,n.vsb.isPageChanged,n.vsb.isLastPage),n.vsb.setScrollFromOuterSrc(t.target.scrollTop,n.scroll.direction),n.vsb.isPageChanged){var e=s(n.calcRenderIndex(t.target.scrollTop),1)[0];n.chunk.setRenderIndex(e,n.vsb.currentPage,n.list.length,n.vsb.isLastPage),n.vsb.isLastPage,n.vsb.currentPage,n.refreshList()}else n.calcCurrentDOMRender();requestAnimationFrame((function(){requestAnimationFrame((function(){n.vsb.isPageChanged=!1,n.isSyncing=!1}))}))}})),this.setIndexedDb(),this.status.setStatus(jt.Ready),this.middleWrapper.classList.add("hiddingStatus"),setTimeout((function(){n.middleWrapper.classList.remove("hiddingStatus","showStatus")}),2e3);case 26:case"end":return t.stop()}}),t,this)}))),function(){return N.apply(this,arguments)})},{key:"setDefaultStyles",value:function(){if(void 0!==this.listWrapperHeight&&(this.wrapperEl.style.height=this.listWrapperHeight),this.wrapperEl.offsetHeight<10){var t=ee.error.zeroHeight;this.wrapperEl.innerHTML="<h3>".concat(t,"</h3>"),this.throwError(t)}this.wrapperEl.style.position="relative"}},{key:"createInnerList",value:function(){this.middleWrapper=document.createElement("div"),this.middleWrapper.classList.add("middleWrapper","showStatus"),this.middleWrapper.dataset.status=jt.Initial,this.wrapperEl.append(this.middleWrapper);var t=document.createElement(te[this.listType]),e="".concat(this.selectorId,"_").concat(this.listType.charAt(0).toUpperCase()).concat(this.listType.slice(1));if(t.setAttribute("class",e),"table"===this.listType&&this.tHeadNames&&this.tHeadNames.length>0){var r,i=document.createElement("tbody"),n=document.createElement("thead"),s=null===(r=this.tHeadNames)||void 0===r?void 0:r.reduce((function(t,e){return t+"<td>".concat(e,"</td>")}),"");return n.innerHTML='<tr class="'.concat(this.selectorId,'__listItem">').concat(s,"</tr>"),this.middleWrapper.appendChild(t).appendChild(n),this.middleWrapper.appendChild(t).appendChild(i)}return this.middleWrapper.appendChild(t)}},{key:"getAllSizes",value:function(){var t;void 0===this.domMngr&&this.throwError(ee.error.domManagerIsUndefined);var e=this.wrapperEl,r=this.listEl,i=window.getComputedStyle(e),n=r.firstChild;if(this.list.wrapperHeight=parseInt(i.getPropertyValue("height"),10)||1,this.list.wrapperHeight<2)console.error("You must set height to your list-wrapper more than 10px!");else{if(!n){this.list.data||this.throwError(ee.error.dataIsUndefined);var s=this.list.data[0];this.domMngr.targetElem.append(this.domMngr.createItem(s,0)),n=r.firstChild}this.list.itemHeight=(null===(t=n)||void 0===t?void 0:t.offsetHeight)||this.list.wrapperHeight,this.initializeBaseStyles(),this.chunk.amount=Math.ceil(this.list.wrapperHeight/this.list.itemHeight),this.list.setExistingSizeInDOM(this.chunk.amount),this.list.halfOfExistingSizeInDOM=Math.ceil(this.list.existingSizeInDOM/2),this.list.length=Math.round(this.vsb.safeLimit/this.list.itemHeight),this.list.length>this.list.fullLength&&(this.list.length=this.list.fullLength),(!this.isLazy&&this.list.length>this.list.data.length||this.list.length<=0)&&(this.list.length=this.list.data.length),this.list.lastPageLength=this.list.fullLength%this.list.length,0===this.list.lastPageLength&&(this.list.lastPageLength,this.list.lastPageLength=this.list.length),this.chunk.lastRenderIndex=this.list.length-this.list.halfOfExistingSizeInDOM-this.list.tailingElementsAmount,this.list.startIndexOfLastPart=this.list.length-this.list.existingSizeInDOM,this.chunk.lastOrderNumber=Math.floor(this.list.length/this.chunk.amount),this.chunk.htmlHeight=this.chunk.amount*this.list.itemHeight,n&&this.domMngr.removeItem("firstChild")}}},{key:"initializeBaseStyles",value:function(){var t="".concat(this.selectorId,"_").concat(this.listType.charAt(0).toUpperCase()).concat(this.listType.slice(1)),e={list:"li",table:"tbody > tr",div:"div"}[this.listType],r="\n    .".concat(this.selectorId,"_List {\n      overflow: hidden; \n      margin: 0;\n    }\n    \n    .").concat(this.selectorId,"_List li { \n      white-space: nowrap;\n    }\n    \n    .").concat(t," > ").concat(e).concat(".loading .dots {\n    width: 0.5em;\n    animation: load 3s steps(4, end) infinite;\n    display: inline-block;\n    overflow: hidden;\n    vertical-align: text-bottom;\n}\n\n@keyframes load {\n    from {\n        width: 0em;\n    }\n    to   {\n        width: 2em;\n    }\n}\n","\n    \n    .").concat(this.selectorId,"_List li.loading { \n      min-height: ").concat(this.list.itemHeight,"px;\n      box-sizing: border-box;\n    }\n    \n    .").concat(this.selectorId,"_List li.loading img { \n      width: 100%;\n      aspect-ratio: 1;\n      background: #ccc;\n      animation: opacityLoader 3s ease-in-out infinite alternate;\n      border-radius: 10px;\n    }\n    \n    @keyframes opacityLoader {\n      from { opacity: 1; }\n      to { opacity: 0.1; }\n    }\n  "),i=document.createElement("style");i.textContent=r.trim(),this.wrapperEl.prepend(i)}},{key:"createVirtualScroll",value:function(){var t;this.list.tailingElementsAmount=this.list.length%this.chunk.amount,this.list.pageTailingElementsAmount=this.list.length%this.chunk.amount,this.list.lastPageTailingElementsAmount=this.list.lastPageLength%this.chunk.amount,this.list.tailingElementsAmount,this.chunk.prevPageRenderIndex=this.chunk.lastRenderIndex+this.chunk.amount-this.chunk.lastRenderIndex%this.chunk.amount,this.render&&this.render.reInitValues(this.chunk.lastRenderIndex,this.list.length),this.domMngr.setHeightToList(this.list),this.skeleton.setListLength(this.list.fullLength),this.list.lastPageStartIndexOfLastPart=this.list.lastPageLength-this.list.existingSizeInDOM,this.list.lastPageStartIndexOfLastPart<0&&(this.list.lastPageStartIndexOfLastPart=0),this.chunk.lastOrderNumber=Math.floor(this.list.length/this.chunk.amount),this.chunk.lastPageLastOrderNumber=Math.floor(this.list.lastPageLength/this.chunk.amount);var e=this.list.getTotalListHeight(),r=this.listEl.offsetHeight;this.vsb.init({totalHeight:e,realHeight:r,fullLength:this.list.fullLength,listLength:this.list.length,lastPageLength:this.list.lastPageLength,origScrollElem:this.middleWrapper}),null===(t=this.middleWrapper)||void 0===t||t.after(this.vsb.elem)}},{key:"calcRenderIndex",value:function(t){var e=this.chunk.getOrderNumber(t);Number("1.9.7"[0])<2&&(this.listEl.childNodes.length,this.list.existingSizeInDOM);var r=this.chunk.calcRenderIndex(e),i=this.vsb.isLastPage?this.chunk.lastPageLastOrderNumber:this.chunk.lastOrderNumber,n=this.vsb.isLastPage?this.scroll.lastPageMaxScroll:this.scroll.maxScroll;this.scroll.setGoingFromBottom(this.chunk.firstOrderNumber,i,e,t,n);var s=this.vsb.isLastPage?this.list.lastPageTailingElementsAmount:this.list.pageTailingElementsAmount,o=r+(this.scroll.isGoingFromBottom?s:0);return this.chunk.startRenderIndex!==o&&"up"===this.scroll.direction&&o>this.chunk.prevPageRenderIndex&&(o=this.list.length-3*this.chunk.amount),[o,r]}},{key:"calcCurrentDOMRender",value:(A=a(f().mark((function t(){var e,r,i,n,o,a,l,c,h,u,d,p,m,g,v;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.middleWrapper,r=e.scrollTop,i=this.calcRenderIndex(r),n=s(i,2),o=n[0],n[1],a=this.list.length*(this.vsb.currentPage-1)+o,l=this.chunk.getRenderIndexDiff(a),((c=this.checkBigDiff(l))||this.vsb.isPageChanged)&&(clearTimeout(this.timerIdRefreshList),this.setTimerToRefreshList()),this.chunk.startRenderIndex===o){t.next=22;break}if(h=this.chunk.startRenderIndex,this.chunk.setRenderIndex(o,this.vsb.currentPage,this.list.length,this.vsb.isLastPage),this.render||this.throwError(ee.error.renderControllerIsUndefined),!this.render.isAllowRenderNearBorder(this.scroll.direction,this.chunk.startRenderIndex,1!==this.vsb.currentPage&&this.vsb.isLastPage)||!this.domMngr){t.next=22;break}if(this.timerIdRefreshList||(u=this.chunk.startRenderIndex<h?"up":"down")&&u!==this.scroll.direction&&(console.warn("================ Направления не совпадают!"),this.scroll.direction=u),"====== startRenderIndex -> ".concat(this.chunk.startRenderIndex," (").concat(this.chunk.itemIndex,"), page ").concat(this.vsb.currentPage,", (real: ").concat(this.scroll.direction,", temp: ").concat(u," ), isGoingFromBottom: ").concat(this.scroll.isGoingFromBottom,", ").concat(l," ======"),d={itemIndex:this.chunk.itemIndex,startRenderIndex:this.chunk.startRenderIndex,amount:this.chunk.amount,htmlHeight:this.chunk.htmlHeight},!this.isLazy||c){t.next=20;break}return p=this.getSequence(this.chunk.itemIndex),m=s(p,2),g=m[0],v=m[1],t.next=20,this.loadDataFromSources(g,v);case 20:this.domMngr.modifyCurrentDOM(d,this.list,this.scroll.direction,this.scroll.isGoingFromBottom,this.vsb),Number("1.9.7"[0])<2&&(c||this.checkIndexOrdering(this.scroll.isGoingFromBottom));case 22:case"end":return t.stop()}}),t,this)}))),function(){return A.apply(this,arguments)})},{key:"checkBigDiff",value:function(t){var e=this.vsb.isLastPage?this.list.lastPageTailingElementsAmount:this.list.pageTailingElementsAmount;return this.scroll.isBigDiff(t,this.chunk.amount,e)}},{key:"loadDataFromSources",value:(I=a(f().mark((function t(e,r){var i,n,s=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[{name:"DB",loader:function(){var t=a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getItemsFromDB(e,r);case 2:return t.abrupt("return",s.checkItemForLoad(e,r));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{name:"fetch",loader:function(){var t=a(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.fetchUnfoundedRanges(e),t.abrupt("return",[]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}],n=this.checkItemForLoad(e,r),t.next=4,i.reduce(function(){var t=a(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(0!==n.length){t.next=4;break}return t.abrupt("return",Promise.resolve());case 4:return"Unfounded (for ".concat(r.name,")"),t.next=7,r.loader(n);case 7:return n=t.sent,t.abrupt("return",Promise.resolve());case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Promise.resolve());case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return I.apply(this,arguments)})},{key:"refreshList",value:function(t){if(this.render){var e=this.chunk.startRenderIndex;this.chunk.setRenderIndex(e,this.vsb.currentPage,this.list.length,this.vsb.isLastPage),this.vsb.currentPage!==this.vsb.totalPages||this.vsb.isLastPage||console.error(this.vsb.currentPage,this.vsb.currentPage===this.vsb.totalPages,this.vsb.isLastPage);var r=s(this.getSequence(this.chunk.itemIndex,!0,this.vsb.isLastPage),2),i=r[0],n=r[1];if(this.isLazy){Number("1.9.7"[0]);var o=[i,n];this.fetchUnfoundedRanges([o])}if(t&&t!==this.timerIdRefreshList)return;this.domMngr.resetAllList(this.chunk,e,i,this.list,this.scroll.direction,this.vsb),this.timerIdRefreshList=null,Number("1.9.7"[0])<2&&(this.checkIndexOrdering(),this.scroll.direction,"renderIndex: ".concat(e))}}},{key:"setTimerToRefreshList",value:function(){var t=this,e=window.setTimeout(a(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.refreshList(e);case 1:case"end":return r.stop()}}),r)}))),0);this.timerIdRefreshList=e}},{key:"setApiSettings",value:(P=a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(this.dataUrl,this.subDir);case 2:return this.includeEnd=t.sent,t.next=5,E(this.dataUrl,this.includeEnd,this.subDir);case 5:this.basedIndex=t.sent;case 6:case"end":return t.stop()}}),t,this)}))),function(){return P.apply(this,arguments)})},{key:"setListData",value:function(t){var e=this;t.forEach((function(t,r){return e.setListDataByIndex(t,r)})),this.saveListData(t)}},{key:"saveListData",value:function(t){if(this.dbmanager){var e=this.list.data.map((function(t,e){return{index:e,value:t}}));this.dbmanager.writeMany(e)}}},{key:"setListDataByIndex",value:function(t,e){this.list.data[e]=t}},{key:"saveListDataByIndex",value:function(t,e){this.dbmanager&&this.dbmanager.write(e,t)}},{key:"getSavedListData",value:(S=a(f().mark((function t(){var e,r,i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dbmanager){t.next=2;break}return t.abrupt("return",Promise.reject());case 2:return t.next=4,this.dbmanager.getStoreSize();case 4:if(e=t.sent,r=10,i=this.isLazy?r:e,!(e<=i)){t.next=14;break}return t.next=11,this.dbmanager.readAll();case 11:n=t.sent,t.next=18;break;case 14:return console.warn("Объем закешированных данных слишком большой"),t.next=17,this.dbmanager.readRange(0,r-1);case 17:n=t.sent;case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"getInitialListData",value:(L=a(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("local"!==this.dataLoadPlace){t.next=3;break}return t.abrupt("return",Promise.resolve(e));case 3:return this.status.setStatus(jt.Loading),t.next=6,this.setRemoteDataSettings(e);case 6:return t.next=8,this.getInitialRemoteData(e);case 8:return r=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return L.apply(this,arguments)})},{key:"setInitialListData",value:function(t){"local"===this.dataLoadPlace?this.setLocalData(t):this.setListData(t)}},{key:"setLocalData",value:function(t){this.list.data=t,this.list.fullLength=this.forcedListLength||t&&t.length}},{key:"setRemoteDataSettings",value:(k=a(f().mark((function t(e){var r,i,n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=T(e),i=s(r,2),n=i[0],o=i[1],n||o||this.throwError(ee.error.notValidUrl),!o){t.next=6;break}return this.isLazy=!0,t.next=6,this.setApiSettings();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"getInitialRemoteData",value:(d=a(f().mark((function t(e){var r,i,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLazy){t.next=4;break}return r=this.basedIndex,i=this.basedIndex+Number(!this.includeEnd),t.abrupt("return",this.getListDataLazy(r,i));case 4:return t.next=6,x(e);case 6:return n=t.sent,t.abrupt("return",this.extractResponse(n));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"setInitialLazyRemoteData",value:(c=a(f().mark((function t(){var e,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.basedIndex+1,t.next=3,this.getListDataLazy(e,this.list.existingSizeInDOM);case 3:r=t.sent,i=new Array(1).concat(r),this.setListData(i);case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"setListFulLength",value:(o=a(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.forcedListLength){t.next=3;break}return this.list.fullLength=this.forcedListLength,t.abrupt("return");case 3:if(!this.isLazy||!r){t.next=11;break}return t.next=6,O(r,this.subDir);case 6:t.t0=t.sent,t.t1=Number(!this.basedIndex),this.list.fullLength=t.t0+t.t1,t.next=12;break;case 11:this.list.fullLength=e.length;case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"setListLength",value:function(){Array.isArray(this.list.data)||this.throwError(ee.error.notArray),this.list.fullLength||this.throwError(ee.error.zeroListSize),this.list.length=this.list.fullLength,this.skeleton.setListLength(this.list.length)}},{key:"getSequence",value:function(t){var e,r,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(s){var o=this.list.length*(this.vsb.totalPages-1);i=o+this.list.lastPageLength}else i=this.list.length*this.vsb.currentPage;if(n){var a,l=t-this.chunk.amount,c=this.list.length*(this.vsb.currentPage-1);if(s){var h=this.list.length*(this.vsb.totalPages-1),u=this.list.lastPageLength-this.list.existingSizeInDOM;u<0&&(u=0),a=h+u}else a=this.list.length*this.vsb.currentPage-this.list.existingSizeInDOM;(e=l>c?l:c)>a&&(e=a),r=e+this.list.existingSizeInDOM}else(r=(e=Zt(this.scroll.direction,this.list.halfOfExistingSizeInDOM,t,this.chunk.amount))+this.chunk.amount)>i&&(r=i);return[e,r]}},{key:"fetchUnfoundedRanges",value:function(t){var e=this;t.forEach((function(t){var r=s(t,2),i=r[0],n=r[1],o=i+e.basedIndex,a=n+e.basedIndex-Number(e.includeEnd);y(e.dataUrl,o,a).then((function(t){if(0!==t.length){var r=e.extractResponse(t);e.addNewItemsToDataList(i,r),e.updateSkeletonItems(i,r)}}))}))}},{key:"addNewItemsToDataList",value:function(t,e){for(var r=e.length,i=0;i<r;i++){var n=t+i;this.setListDataByIndex(e[i],n),this.saveListDataByIndex(e[i],n)}}},{key:"updateSkeletonItems",value:function(t,e){for(var r=e.length,i=0;i<r;i++){var n=t+i+1,s='[aria-posinset="'.concat(n,'"]'),o=this.domMngr.targetElem.querySelector(s);o&&this.skeleton.updateElement(o,e[i],n)}}},{key:"getItemsFromDB",value:(i=a(f().mark((function t(e,r){var i,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dbmanager){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.dbmanager.readRange(e,r-1);case 4:s=t.sent,(i=this.list.data).splice.apply(i,[e,this.chunk.amount].concat(n(s)));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"checkItemForLoad",value:function(t,e){for(var r=[],i=!1,n=[],s=e-1,o=t;o<e;o++){var a=this.list.data[o];if(void 0===a&&!1===i)i=!0,n.push(o);else if(i&&(void 0!==a||o===s)){var l=o===s&&void 0===a?o+1:o;n.push(l),r.push(n.slice()),n.length=0,i=!1}}return r}},{key:"checkIndexOrdering",value:function(t){var e,r=this,i=null===(e=this.domMngr)||void 0===e?void 0:e.targetElem;i||this.throwError(ee.error.noTargetElem);var s=null,o=!0;return n(i.children).forEach((function(e){var i=Number(e.getAttribute("aria-posinset"));if(null!==s){if(s+1!==i){var n="Индексы поломались на элементе ".concat(i," (ожидали ").concat(s+1,"), isGoingFromBottom - ").concat(t);console.error("".concat(r.testResults.currentTestName," -- ").concat(n,")")),Array.isArray(r.testResults.errors.get(r.testResults.currentTestName))||r.testResults.errors.set(r.testResults.currentTestName,[]),r.testResults.errors.get(r.testResults.currentTestName).push(n),o=!1}s=i}else s=i})),o}},{key:"getListDataLazy",value:(r=a(f().mark((function t(){var e,r,i,n=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,r=n.length>1&&void 0!==n[1]?n[1]:1,this.dataUrl||this.throwError(ee.error.noDataUrl),"string"==typeof this.dataUrl&&this.throwError(ee.error.dataUrlNotAFn),t.prev=4,t.next=7,y(this.dataUrl,e,r);case 7:return i=t.sent,t.abrupt("return",this.extractResponse(i));case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t,this,[[4,11]])}))),function(){return r.apply(this,arguments)})},{key:"extractResponse",value:function(t){var e=Array.isArray(t)?t:this.subDir&&t[this.subDir];return Array.isArray(e)||this.throwError(ee.error.fetchedIsNotArray),e}},{key:"setIndexedDb",value:(e=a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dbmanager){t.next=2;break}return t.abrupt("return");case 2:return t.next=8,this.dbmanager.setTTL(6048e5);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()})(),self.InfinityScroll=i.InfinityScroll})();